"use strict";(self["webpackChunkmm_web"]=self["webpackChunkmm_web"]||[]).push([[300],{16821:function(t,s,a){a.d(s,{Z:function(){return n}});var e=function(){var t=this,s=t._self._c;return s("content",[s("Select",{style:{width:t.width+"px"},attrs:{clearable:"",filterable:"",loading:t.loading,transfer:""},on:{"on-clear":t.clearValue,"on-select":t.selectValue},model:{value:t.valueData,callback:function(s){t.valueData=s},expression:"valueData"}},[s("div",{attrs:{slot:"empty"},slot:"empty"},[t._v("未找到数据")]),t._l(t.list,(function(a,e){return s("Option",{key:e,attrs:{value:a.id}},[t._v(" "+t._s(a.name)+" ")])}))],2)],1)},i=[],l={props:{value:{type:[String,Number,Array],default:""},width:{type:Number,default:200}},data:function(){return{loading:!1,list:[{id:1,name:"品牌"}],valueData:"",searchData:{}}},watch:{},created(){this.valueData=this.value},methods:{selectValue(t){this.$emit("input",t.value),this.$emit("on-select",t.value)},clearValue(){this.$emit("input",""),this.$emit("on-select","")}}},o=l,r=a(1001),c=(0,r.Z)(o,e,i,!1,null,"12504e18",null),n=c.exports},80699:function(t,s,a){a.d(s,{Z:function(){return n}});var e=function(){var t=this,s=t._self._c;return s("content",[s("Select",{style:{width:t.width+"px"},attrs:{clearable:"",filterable:"",loading:t.loading,transfer:""},on:{"on-clear":t.clearValue,"on-select":t.selectValue},model:{value:t.valueData,callback:function(s){t.valueData=s},expression:"valueData"}},[s("div",{attrs:{slot:"empty"},slot:"empty"},[t._v("未找到数据")]),t._l(t.list,(function(a,e){return s("Option",{key:e,attrs:{value:a.id}},[t._v(" "+t._s(a.name)+" ")])}))],2)],1)},i=[],l={props:{value:{type:[String,Number,Array],default:""},width:{type:Number,default:200}},data:function(){return{loading:!1,list:[{id:1,name:"部门职位"}],valueData:"",searchData:{}}},watch:{},created(){this.valueData=this.value},methods:{selectValue(t){this.$emit("input",t.value),this.$emit("on-select",t.value)},clearValue(){this.$emit("input",""),this.$emit("on-select","")}}},o=l,r=a(1001),c=(0,r.Z)(o,e,i,!1,null,"221da70c",null),n=c.exports},67737:function(t,s,a){a.d(s,{Z:function(){return n}});var e=function(){var t=this,s=t._self._c;return s("content",[s("Select",{style:{width:t.width+"px"},attrs:{clearable:"",filterable:"",loading:t.loading,transfer:""},on:{"on-clear":t.clearValue,"on-select":t.selectValue},model:{value:t.valueData,callback:function(s){t.valueData=s},expression:"valueData"}},[s("div",{attrs:{slot:"empty"},slot:"empty"},[t._v("未找到数据")]),t._l(t.list,(function(a,e){return s("Option",{key:e,attrs:{value:a.id}},[t._v(" "+t._s(a.name)+" ")])}))],2)],1)},i=[],l={props:{value:{type:[String,Number,Array],default:""},width:{type:Number,default:200}},data:function(){return{loading:!1,list:[{id:1,name:"商品分类"}],valueData:"",searchData:{}}},watch:{},created(){this.valueData=this.value},methods:{selectValue(t){this.$emit("input",t.value),this.$emit("on-select",t.value)},clearValue(){this.$emit("input",""),this.$emit("on-select","")}}},o=l,r=a(1001),c=(0,r.Z)(o,e,i,!1,null,"aca8582c",null),n=c.exports},69343:function(t,s,a){a.r(s),a.d(s,{default:function(){return Ga}});var e=function(){var t=this,s=t._self._c;return s("div",{staticClass:"box"},[s("div",{staticClass:"column"},[t._v("品项设置")]),s("Tabs",{attrs:{type:"card"},on:{"on-click":t.handleTabClick},model:{value:t.tab_index,callback:function(s){t.tab_index=s},expression:"tab_index"}},t._l(t.tab_list,(function(a){return s("TabPane",{key:a.id,attrs:{label:a.name,name:a.name}},[t.current(a,"项目")?s("ProjectList"):t._e(),t.current(a,"套餐次卡")?s("PackageList"):t._e(),t.current(a,"商品")?s("GoodsList"):t._e(),t.current(a,"储值卡")?s("ValueCardList"):t._e(),t.current(a,"折扣卡")?s("DiscountCardList"):t._e(),t.current(a,"优惠券")?s("CouponList"):t._e(),t.current(a,"类别设置")?s("Type"):t._e(),t.current(a,"品牌/供应商/商品单位设置")?s("Supplier"):t._e()],1)})),1)],1)},i=[],l=function(){var t=this,s=t._self._c;return s("div",{staticClass:"ProjectList"},[s("div",{staticClass:"search"},[s("div",{staticClass:"left"},[s("div",{staticClass:"box"},[s("Input",{staticStyle:{width:"250px"},attrs:{clearable:"","enter-button":"",placeholder:"输入项目分类/项目名称",search:""},on:{"on-clear":t.search,"on-search":t.search}})],1),s("div",{staticClass:"box"},[s("span",{staticClass:"text"},[t._v("项目分类")]),s("SelectProductType",{on:{"on-select":t.search},model:{value:t.searchData.goods_type_id,callback:function(s){t.$set(t.searchData,"goods_type_id",s)},expression:"searchData.goods_type_id"}})],1),s("div",{staticClass:"box"},[s("span",{staticClass:"text"},[t._v("适用门店")]),s("SelectShop",{on:{"on-select":t.search},model:{value:t.searchData.sid,callback:function(s){t.$set(t.searchData,"sid",s)},expression:"searchData.sid"}})],1),s("div",{staticClass:"box"},[s("span",{staticClass:"text"},[t._v("状态")]),s("SelectProjectStatus",{on:{"on-select":t.search},model:{value:t.searchData.status,callback:function(s){t.$set(t.searchData,"status",s)},expression:"searchData.status"}})],1)]),s("div",{staticClass:"right"},[s("div",{staticClass:"add-bt",on:{click:function(s){return t.showModal("新增项目","Project")}}},[t._v(" 新增项目 ")]),s("div",{staticClass:"add-bt"},[t._v("导入项目")]),s("div",{staticClass:"add-bt",on:{click:t.exportDataEvent}},[t._v("导出项目")])])]),s("div",{staticClass:"list"},[s("vxe-table",{ref:"xTable",attrs:{"cell-style":{textAlign:"center"},"column-config":{resizable:!0},data:t.tableData,"header-align":"center",height:t.tableHeight,loading:t.loading,"row-config":{isHover:!0},size:"small"}},[t._l(t.tableColumns,(function(t,a){return s("vxe-column",{key:a+t.key,attrs:{field:t.key,fixed:t.fixed,"min-width":t.width,"show-overflow":"title",title:t.title}})})),s("vxe-column",{attrs:{title:"操作",width:"120"}},[[s("span",{staticClass:"bt"},[t._v("编辑")]),s("span",{staticClass:"bt"},[t._v("下架")])]],2)],2),s("div",{staticClass:"page"},[s("Page",{attrs:{current:t.searchData.p,"page-size":t.searchData.page,"show-elevator":"","show-sizer":"",size:"small",total:t.searchData.count,transfer:""},on:{"on-change":t.currentPage,"on-page-size-change":t.pageSizeChange}})],1)],1),s("Modal",{attrs:{"footer-hide":!0,scrollable:t.modal.scrollable,styles:t.modal.styles,title:t.modal.title,width:t.modal.width},model:{value:t.modal.show,callback:function(s){t.$set(t.modal,"show",s)},expression:"modal.show"}},[t.modalShow("Project")?s("Project"):t._e()],1)],1)},o=[],r=function(){var t=this,s=t._self._c;return s("div",{staticClass:"Project"},[s("div",{staticClass:"box"},[s("div",{staticClass:"left"},[t._m(0),s("div",{staticClass:"form"},[s("div",{staticClass:"row"},[t._m(1),s("div",{staticClass:"r"},[s("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入项目名称"}})],1)]),s("div",{staticClass:"row"},[t._m(2),s("div",{staticClass:"r"},[s("SelectShop")],1)]),s("div",{staticClass:"row"},[t._m(3),s("div",{staticClass:"r"},[s("Input",{staticStyle:{width:"200px",padding:"0 2px"},attrs:{placeholder:"请输入金额"}}),s("span",{staticStyle:{color:"#f19ec2",cursor:"pointer"},on:{click:function(s){return t.show(s)}}},[t._v(" "+t._s(t.dropdown.title)+" "),s("Icon",{attrs:{size:16,type:"md-arrow-dropright"}})],1),t.dropdown.show?s("div",{staticClass:"dropdown"},[s("div",{staticClass:"row"},[s("div",{staticClass:"dropdown-l"},[t._v("武汉总店")]),s("div",{staticClass:"dropdown-r"},[s("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入金额"}},[s("span",{attrs:{slot:"append"},slot:"append"},[t._v("￥")])])],1)]),s("div",{staticClass:"row"},[s("div",{staticClass:"dropdown-l"},[t._v("惠城总店")]),s("div",{staticClass:"dropdown-r"},[s("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入金额"}},[s("span",{attrs:{slot:"append"},slot:"append"},[t._v("￥")])])],1)])]):t._e()],1)]),s("div",{staticClass:"row"},[t._m(4),s("div",{staticClass:"r"},[s("Input",{staticStyle:{width:"100px"},attrs:{placeholder:"请输入数字"}}),t._v(" 小时 "),s("Input",{staticStyle:{width:"100px"},attrs:{placeholder:"请输入数字"}}),t._v(" 分钟 ")],1)]),s("div",{staticClass:"row"},[t._m(5),s("div",{staticClass:"r"},[s("SelectProductType",{on:{"on-select":t.productType},model:{value:t.formData.goods_type_id,callback:function(s){t.$set(t.formData,"goods_type_id",s)},expression:"formData.goods_type_id"}})],1)])])]),s("div",{staticClass:"right"},[s("div",{staticClass:"header"},[s("span",{staticClass:"title"},[t._v("其他信息")]),s("Poptip",{attrs:{placement:"left-start",transfer:"",trigger:"hover"}},[s("div",{staticClass:"explain"},[t._v("?字段说明")]),s("div",{attrs:{slot:"content"},slot:"content"},[s("div",{staticClass:"fields-remark"},[s("p",{staticClass:"text"},[s("span",{staticStyle:{"font-weight":"bold"}},[t._v("项目名称：")]),t._v(" 项目名称不要超过50个字。 ")]),s("p",{staticClass:"text"},[s("span",{staticStyle:{"font-weight":"bold"}},[t._v("适用门店：")]),t._v(" 设置哪些门店可以经营该项目。 ")]),s("p",{staticClass:"text"},[s("span",{staticStyle:{"font-weight":"bold"}},[t._v("统一售价：")]),t._v(" 若存在不同门店不同的定价,请展开按门店设置价格。 ")]),s("p",{staticClass:"text"},[s("span",{staticStyle:{"font-weight":"bold"}},[t._v("服务时长：")]),t._v(" 由此判断预约表每个会员预约的老师所需时长,避免控期。 ")]),s("p",{staticClass:"text"},[s("span",{staticStyle:{"font-weight":"bold"}},[t._v("是否课程：")]),t._v(" 项口与课程预约表不同,如瑜伽、亲子洗游等。 ")]),s("p",{staticClass:"text"},[s("span",{staticStyle:{"font-weight":"bold"}},[t._v("项日分类：")]),t._v(" (推荐完善)方便收银和设置卡的时候快速筛选和指定折扣。 ")]),s("p",{staticClass:"text"},[s("span",{staticStyle:{"font-weight":"bold"}},[t._v("线上可预约：")]),t._v(" 开启后该项目就会在公众号的预约中显示出来 ")]),s("p",{staticClass:"text"},[s("span",{staticStyle:{"font-weight":"bold"}},[t._v("项目关联商品：")]),t._v(" 关联之后,项目所消耗的产品会从库存扣除 ")]),s("p",{staticClass:"text"},[s("span",{staticStyle:{"font-weight":"bold"}},[t._v("项口体验价：")]),t._v(" 在客户第一次体验该项目的时候可以享受的特殊优惠价格。 ")]),s("p",{staticClass:"text"},[s("span",{staticStyle:{"font-weight":"bold"}},[t._v("项目状态：")]),s("br"),t._v(" 上架：可以在系统中售卖该项目 "),s("br"),t._v(" 下架：不可在系统中售卖该项日 ")]),s("p",{staticClass:"text"},[s("span",{staticStyle:{"font-weight":"bold"}},[t._v("项目配图：")]),t._v(" 针对线上商城首图 ")]),s("p",{staticClass:"text"},[s("span",{staticStyle:{"font-weight":"bold"}},[t._v("项目详情：")]),t._v(" 针对该项目的详情介绍,可文字、图片,主要在商城展示 ")])])])])],1),s("div",{staticClass:"form"},[s("div",{staticClass:"row"},[s("div",{staticClass:"l"},[t._v("是否课程")]),s("div",{staticClass:"r"},[s("RadioGroup",[s("Radio",{attrs:{label:"是"}},[s("span",[t._v("是")])]),s("Radio",{attrs:{label:"否"}},[s("span",[t._v("否")])])],1)],1)]),s("div",{staticClass:"row"},[s("div",{staticClass:"l"},[t._v("所属部门")]),s("div",{staticClass:"r"},[s("SelectPosition",{on:{"on-select":t.position},model:{value:t.formData.position_id,callback:function(s){t.$set(t.formData,"position_id",s)},expression:"formData.position_id"}})],1)]),s("div",{staticClass:"row"},[s("div",{staticClass:"l"},[t._v("线上可预约")]),s("div",{staticClass:"r"},[s("RadioGroup",[s("Radio",{attrs:{label:"是"}},[s("span",[t._v("开启")])]),s("Radio",{attrs:{label:"否"}},[s("span",[t._v("关闭")])])],1)],1)]),s("div",{staticClass:"row"},[s("div",{staticClass:"l"},[t._v("项目体验价")]),s("div",{staticClass:"r"},[s("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入金额"}})],1)]),s("div",{staticClass:"row"},[s("div",{staticClass:"l"},[t._v("项目状态")]),s("div",{staticClass:"r"},[s("RadioGroup",[s("Radio",{attrs:{label:"是"}},[s("span",[t._v("上架")])]),s("Radio",{attrs:{label:"否"}},[s("span",[t._v("下架")])])],1)],1)]),s("div",{staticClass:"row"},[s("div",{staticClass:"l"},[t._v("项目配图")]),s("div",{staticClass:"r"},[s("UploadImage",{attrs:{"default-list":t.defaultList},on:{remove:t.removeFile,uploadFile:t.uploadFile}}),t._v(" 建议尺寸图片750*750 ")],1)]),t._m(6)])])]),s("div",{staticClass:"footer"},[s("div",{staticClass:"bt",on:{click:t.getEditorData}},[t._v("保存")])])])},c=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"header"},[s("span",{staticClass:"red"},[t._v("*")]),s("span",{staticClass:"title"},[t._v("基础信息")]),s("span",{staticClass:"notice"},[t._v("带*为必填项")])])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"l"},[s("span",{staticClass:"red"},[t._v("*")]),t._v(" 项目名称 ")])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"l"},[s("span",{staticClass:"red"},[t._v("*")]),t._v(" 适用门店 ")])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"l"},[s("span",{staticClass:"red"},[t._v("*")]),t._v(" 统一售价 ")])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"l"},[s("span",{staticClass:"red"},[t._v("*")]),t._v(" 服务时长 ")])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"l"},[s("span",{staticClass:"red"},[t._v("*")]),t._v(" 项目分类 ")])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"row"},[s("div",{staticClass:"l"},[t._v("项目详情")]),s("div",{staticClass:"r"},[s("div",{attrs:{id:"editor"}})])])}],n=a(97438),d=a.n(n),h=a(80699),v=a(67737),p=a(83368),u=a(13787),m={name:"Project",components:{UploadImage:u.Z,SelectShop:p.Z,SelectProductType:v.Z,SelectPosition:h.Z},data:function(){return{defaultList:[],editor:null,editorData:"",formData:{position_id:"",goods_type_id:"",img_id:""},dropdown:{show:!1,title:"展开"}}},mounted(){const t=new(d())("#editor");t.config.onchange=t=>{this.editorData=t,this.$emit("editorContent",t)},t.create(),this.editor=t},methods:{show(t){"ivu-icon ivu-icon-md-arrow-dropright"===t.currentTarget.children[0].className?(t.currentTarget.children[0].className="ivu-icon ivu-icon-md-arrow-dropdown",this.dropdown.title="收起",this.dropdown.show=!0):(t.currentTarget.children[0].className="ivu-icon ivu-icon-md-arrow-dropright",this.dropdown.title="展开",this.dropdown.show=!1)},getEditorData(){let t=this.editor.txt.html();alert(t)},beforeDestroy(){this.editor.destroy(),this.editor=null},removeFile(t){console.log(t,"removeFile"),this.formData.img_id=""},uploadFile(t){this.formData.img_id=t.id,console.log(t,"uploadFile")},productType(){},position(){}}},_=m,f=a(1001),C=(0,f.Z)(_,r,c,!1,null,"5eb7daea",null),g=C.exports,w=function(){var t=this,s=t._self._c;return s("content",[s("Select",{style:{width:t.width+"px"},attrs:{clearable:"",filterable:"",loading:t.loading,transfer:""},on:{"on-clear":t.clearValue,"on-select":t.selectValue},model:{value:t.valueData,callback:function(s){t.valueData=s},expression:"valueData"}},[s("div",{attrs:{slot:"empty"},slot:"empty"},[t._v("未找到数据")]),t._l(t.list,(function(a,e){return s("Option",{key:e,attrs:{value:a.id}},[t._v(" "+t._s(a.name)+" ")])}))],2)],1)},b=[],y={props:{value:{type:[String,Number,Array],default:""},width:{type:Number,default:200}},data:function(){return{loading:!1,list:[{id:1,name:"全部"},{id:2,name:"上架"},{id:3,name:"下架"}],valueData:"",searchData:{}}},watch:{},created(){this.valueData=this.value},methods:{selectValue(t){this.$emit("input",t.value),this.$emit("on-select",t.value)},clearValue(){this.$emit("input",""),this.$emit("on-select","")}}},x=y,D=(0,f.Z)(x,w,b,!1,null,"b30d5d14",null),S=D.exports,k={name:"ProjectList",components:{SelectProjectStatus:S,SelectProductType:v.Z,SelectShop:p.Z,Project:g},data:function(){return{loading:!1,tableHeight:0,tableData:[{0:"测试测试"}],tableColumns:[{title:"项目分类",key:"0"},{title:"项目名称",key:"1"},{title:"所属部门",key:"2"},{title:"销售价",key:"3"},{title:"项目时长",key:"4"},{title:"项目状态",key:"5"}],searchData:{sid:"",goods_type_id:"",status:"",search:"",start_time:"",end_time:"",p:1,page:10,count:0},date:[],modal:{show:!1,title:"",type:!1,width:1e3,scrollable:!0,styles:{top:"50px"}}}},computed:{modalShow(){return t=>this.modal.type===t&&this.modal.show}},activated(){},created(){},mounted(){this.setHeight(),window.onresize=()=>{this.setHeight()}},methods:{setHeight(){this.tableHeight=window.innerHeight-264},clearDate(){this.searchData.start="",this.searchData.end=""},currentPage(t){this.searchData.p=t,this.getList()},pageSizeChange(t){this.searchData.page=t,this.search()},search(){this.searchData.p=1,this.getList()},showModal(t,s,a={}){console.log(a),this.modal.show=!0,this.modal.title=t,this.modal.type=s,this.modal.width=window.innerWidth-300},exportDataEvent(){setTimeout((()=>{const t=[];this.$refs.xTable.exportData({filename:"",type:"csv",isHeader:!0,isFooter:!0,data:t})}),100)}}},T=k,L=(0,f.Z)(T,l,o,!1,null,"ef544068",null),P=L.exports,$=function(){var t=this,s=t._self._c;return s("div",{staticClass:"PackageList"},[s("div",{staticClass:"search"},[s("div",{staticClass:"left"},[s("div",{staticClass:"box"},[s("Input",{staticStyle:{width:"250px"},attrs:{clearable:"","enter-button":"",placeholder:"输入分类名称/套餐次卡名称",search:""},on:{"on-clear":t.search,"on-search":t.search}})],1),s("div",{staticClass:"box"},[s("span",{staticClass:"text"},[t._v("套餐次卡分类")]),s("SelectProductType",{on:{"on-select":t.search},model:{value:t.searchData.goods_type_id,callback:function(s){t.$set(t.searchData,"goods_type_id",s)},expression:"searchData.goods_type_id"}})],1),s("div",{staticClass:"box"},[s("span",{staticClass:"text"},[t._v("适用门店")]),s("SelectShop",{on:{"on-select":t.search},model:{value:t.searchData.sid,callback:function(s){t.$set(t.searchData,"sid",s)},expression:"searchData.sid"}})],1),s("div",{staticClass:"box"},[s("span",{staticClass:"text"},[t._v("状态")]),s("SelectPackageStatus",{on:{"on-select":t.search},model:{value:t.searchData.status,callback:function(s){t.$set(t.searchData,"status",s)},expression:"searchData.status"}})],1)]),s("div",{staticClass:"right"},[s("div",{staticClass:"add-bt",on:{click:function(s){return t.showModal("新增套餐次卡","Package")}}},[t._v(" 新增项目 ")]),s("div",{staticClass:"add-bt"},[t._v("导入套餐次卡")]),s("div",{staticClass:"add-bt",on:{click:t.exportDataEvent}},[t._v("导出套餐次卡")])])]),s("div",{staticClass:"list"},[s("vxe-table",{ref:"xTable",attrs:{"cell-style":{textAlign:"center"},"column-config":{resizable:!0},data:t.tableData,"header-align":"center",height:t.tableHeight,loading:t.loading,"row-config":{isHover:!0},size:"small"}},[t._l(t.tableColumns,(function(t,a){return s("vxe-column",{key:a+t.key,attrs:{field:t.key,fixed:t.fixed,"min-width":t.width,"show-overflow":"title",title:t.title}})})),s("vxe-column",{attrs:{title:"操作",width:"120"}},[[s("span",{staticClass:"bt"},[t._v("编辑")]),s("span",{staticClass:"bt"},[t._v("下架")])]],2)],2),s("div",{staticClass:"page"},[s("Page",{attrs:{current:t.searchData.p,"page-size":t.searchData.page,"show-elevator":"","show-sizer":"",size:"small",total:t.searchData.count,transfer:""},on:{"on-change":t.currentPage,"on-page-size-change":t.pageSizeChange}})],1)],1),s("Modal",{attrs:{"footer-hide":!0,scrollable:t.modal.scrollable,styles:t.modal.styles,title:t.modal.title,width:t.modal.width},model:{value:t.modal.show,callback:function(s){t.$set(t.modal,"show",s)},expression:"modal.show"}},[t.modalShow("Package")?s("Package"):t._e()],1)],1)},z=[],R=function(){var t=this,s=t._self._c;return s("div",{staticClass:"Package"},[s("div",{staticClass:"box"},[s("div",{staticClass:"left"},[t._m(0),s("div",{staticClass:"form"},[s("div",{staticClass:"row"},[t._m(1),s("div",{staticClass:"r"},[s("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入套餐名称"}})],1)]),s("div",{staticClass:"row"},[t._m(2),s("div",{staticClass:"r"},[s("SelectShop")],1)]),s("div",{staticClass:"row"},[t._m(3),s("div",{staticClass:"r"},[s("Input",{staticStyle:{width:"200px",padding:"0 2px"},attrs:{placeholder:"请输入金额"}}),s("span",{staticStyle:{color:"#f19ec2",cursor:"pointer"},on:{click:function(s){return t.show(s)}}},[t._v(" "+t._s(t.dropdown.title)+" "),s("Icon",{attrs:{size:16,type:"md-arrow-dropright"}})],1),t.dropdown.show?s("div",{staticClass:"dropdown"},[s("div",{staticClass:"row"},[s("div",{staticClass:"dropdown-l"},[t._v("武汉总店")]),s("div",{staticClass:"dropdown-r"},[s("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入金额"}},[s("span",{attrs:{slot:"append"},slot:"append"},[t._v("￥")])])],1)]),s("div",{staticClass:"row"},[s("div",{staticClass:"dropdown-l"},[t._v("惠城总店")]),s("div",{staticClass:"dropdown-r"},[s("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入金额"}},[s("span",{attrs:{slot:"append"},slot:"append"},[t._v("￥")])])],1)])]):t._e()],1)]),s("div",{staticClass:"row"},[t._m(4),s("div",{staticClass:"r"},[s("SelectProductType",{on:{"on-select":t.productType},model:{value:t.formData.goods_type_id,callback:function(s){t.$set(t.formData,"goods_type_id",s)},expression:"formData.goods_type_id"}})],1)]),t._m(5)])]),s("div",{staticClass:"right"},[s("div",{staticClass:"header"},[s("span",{staticClass:"title"},[t._v("其他信息")]),s("Poptip",{attrs:{placement:"left-start",transfer:"",trigger:"hover"}},[s("div",{staticClass:"explain"},[t._v("?字段说明")]),s("div",{attrs:{slot:"content"},slot:"content"},[s("div",{staticClass:"fields-remark"},[s("p",{staticClass:"text"},[s("span",{staticStyle:{"font-weight":"bold"}},[t._v("套餐名称：")]),t._v(" 套餐名称不要翻过50个字。 ")]),s("p",{staticClass:"text"},[s("span",{staticStyle:{"font-weight":"bold"}},[t._v("适用门店：")]),t._v(" 设置哪些门店可以经营该套餐。 ")]),s("p",{staticClass:"text"},[s("span",{staticStyle:{"font-weight":"bold"}},[t._v("统一售价：")]),t._v(" 若存在不同门店不同的定价,请展开按门店设置价格。 ")]),s("p",{staticClass:"text"},[s("span",{staticStyle:{"font-weight":"bold"}},[t._v("套餐分类：")]),t._v(" (推荐完善)方便收银和设置卡的时候快速筛选。 ")]),s("p",{staticClass:"text"},[s("span",{staticStyle:{"font-weight":"bold"}},[t._v("套餐内容：")]),t._v(" 选择当前套餐涵盖哪些项目/商品。 ")]),s("p",{staticClass:"text"},[s("span",{staticStyle:{"font-weight":"bold"}},[t._v("购卡账送：")]),t._v(" 可以选择设置购买该套餐次卡系统自动票送的内容,可以是另一张或储值卡,或项目/商品 ")]),s("p",{staticClass:"text"},[s("span",{staticStyle:{"font-weight":"bold"}},[t._v("套餐状态：")]),s("br"),t._v(" 上架：可以在系统中售卖该套餐 "),s("br"),t._v(" 下架：不可在系统中售卖该套餐 ")]),s("p",{staticClass:"text"},[s("span",{staticStyle:{"font-weight":"bold"}},[t._v("套餐配图：")]),t._v(" 针对线上商城首图 ")]),s("p",{staticClass:"text"},[s("span",{staticStyle:{"font-weight":"bold"}},[t._v("套餐详情：")]),t._v(" 针对该套餐的详情介绍,可文字、图片,主要在的城展示 ")])])])])],1),s("div",{staticClass:"form"},[t._m(6),s("div",{staticClass:"row"},[s("div",{staticClass:"l"},[t._v("套餐状态")]),s("div",{staticClass:"r"},[s("RadioGroup",[s("Radio",{attrs:{label:"是"}},[s("span",[t._v("上架")])]),s("Radio",{attrs:{label:"否"}},[s("span",[t._v("下架")])])],1)],1)]),s("div",{staticClass:"row"},[s("div",{staticClass:"l"},[t._v("套餐配图")]),s("div",{staticClass:"r"},[s("UploadImage",{attrs:{"default-list":t.defaultList},on:{remove:t.removeFile,uploadFile:t.uploadFile}}),t._v(" 建议尺寸图片750*750 ")],1)]),t._m(7)])])]),s("div",{staticClass:"footer"},[s("div",{staticClass:"bt",on:{click:t.getEditorData}},[t._v("保存")])])])},H=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"header"},[s("span",{staticClass:"red"},[t._v("*")]),s("span",{staticClass:"title"},[t._v("基础信息")]),s("span",{staticClass:"notice"},[t._v("带*为必填项")])])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"l"},[s("span",{staticClass:"red"},[t._v("*")]),t._v(" 套餐名称 ")])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"l"},[s("span",{staticClass:"red"},[t._v("*")]),t._v(" 适用门店 ")])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"l"},[s("span",{staticClass:"red"},[t._v("*")]),t._v(" 统一售价 ")])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"l"},[s("span",{staticClass:"red"},[t._v("*")]),t._v(" 套餐分类 ")])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"row"},[s("div",{staticClass:"l"},[s("span",{staticClass:"red"},[t._v("*")]),t._v(" 套餐内容 ")]),s("div",{staticClass:"r"},[s("div",{staticClass:"bt"},[t._v("设置套餐包含内容")])])])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"row"},[s("div",{staticClass:"l"},[t._v("购卡赠送")]),s("div",{staticClass:"r"},[s("div",{staticClass:"bt"},[t._v("添加")])])])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"row"},[s("div",{staticClass:"l"},[t._v("套餐详情")]),s("div",{staticClass:"r"},[s("div",{attrs:{id:"editor"}})])])}],I={name:"Package",components:{UploadImage:u.Z,SelectShop:p.Z,SelectProductType:v.Z},data:function(){return{defaultList:[],editor:null,editorData:"",formData:{goods_type_id:"",img_id:""},dropdown:{show:!1,title:"展开"}}},mounted(){const t=new(d())("#editor");t.config.onchange=t=>{this.editorData=t,this.$emit("editorContent",t)},t.create(),this.editor=t},methods:{show(t){"ivu-icon ivu-icon-md-arrow-dropright"===t.currentTarget.children[0].className?(t.currentTarget.children[0].className="ivu-icon ivu-icon-md-arrow-dropdown",this.dropdown.title="收起",this.dropdown.show=!0):(t.currentTarget.children[0].className="ivu-icon ivu-icon-md-arrow-dropright",this.dropdown.title="展开",this.dropdown.show=!1)},getEditorData(){let t=this.editor.txt.html();alert(t)},beforeDestroy(){this.editor.destroy(),this.editor=null},removeFile(t){console.log(t,"removeFile"),this.formData.img_id=""},uploadFile(t){this.formData.img_id=t.id,console.log(t,"uploadFile")},productType(){}}},G=I,Z=(0,f.Z)(G,R,H,!1,null,"455bfdb4",null),E=Z.exports,F=function(){var t=this,s=t._self._c;return s("content",[s("Select",{style:{width:t.width+"px"},attrs:{clearable:"",filterable:"",loading:t.loading,transfer:""},on:{"on-clear":t.clearValue,"on-select":t.selectValue},model:{value:t.valueData,callback:function(s){t.valueData=s},expression:"valueData"}},[s("div",{attrs:{slot:"empty"},slot:"empty"},[t._v("未找到数据")]),t._l(t.list,(function(a,e){return s("Option",{key:e,attrs:{value:a.id}},[t._v(" "+t._s(a.name)+" ")])}))],2)],1)},M=[],N={props:{value:{type:[String,Number,Array],default:""},width:{type:Number,default:200}},data:function(){return{loading:!1,list:[{id:1,name:"全部"},{id:2,name:"上架"},{id:3,name:"下架"}],valueData:"",searchData:{}}},watch:{},created(){this.valueData=this.value},methods:{selectValue(t){this.$emit("input",t.value),this.$emit("on-select",t.value)},clearValue(){this.$emit("input",""),this.$emit("on-select","")}}},V=N,A=(0,f.Z)(V,F,M,!1,null,"d84175ae",null),B=A.exports,O={name:"PackageList",components:{SelectPackageStatus:B,SelectShop:p.Z,SelectProductType:v.Z,Package:E},data:function(){return{loading:!1,tableHeight:0,tableData:[{0:"测试测试"}],tableColumns:[{title:"套餐次卡分类",key:"0",width:"200px"},{title:"套餐次卡名称",key:"1"},{title:"销售价",key:"2"},{title:"套餐次卡内容",key:"3"}],searchData:{sid:"",goods_type_id:"",status:"",search:"",start_time:"",end_time:"",p:1,page:10,count:0},date:[],modal:{show:!1,title:"",type:!1,width:1e3,scrollable:!0,styles:{top:"50px"}}}},computed:{modalShow(){return t=>this.modal.type===t&&this.modal.show}},activated(){},created(){},mounted(){this.setHeight(),window.onresize=()=>{this.setHeight()}},methods:{setHeight(){this.tableHeight=window.innerHeight-264},clearDate(){this.searchData.start="",this.searchData.end=""},currentPage(t){this.searchData.p=t,this.getList()},pageSizeChange(t){this.searchData.page=t,this.search()},search(){this.searchData.p=1,this.getList()},showModal(t,s,a={}){console.log(a),this.modal.show=!0,this.modal.title=t,this.modal.type=s,this.modal.width=window.innerWidth-300},exportDataEvent(){setTimeout((()=>{const t=[];this.$refs.xTable.exportData({filename:"",type:"csv",isHeader:!0,isFooter:!0,data:t})}),100)}}},j=O,U=(0,f.Z)(j,$,z,!1,null,"5db9c396",null),W=U.exports,J=function(){var t=this,s=t._self._c;return s("div",{staticClass:"Supplier"},[s("Tabs",{attrs:{size:"small"},on:{"on-click":t.handleTabClick},model:{value:t.tab_index,callback:function(s){t.tab_index=s},expression:"tab_index"}},t._l(t.tab_list,(function(a){return s("TabPane",{key:a.id,attrs:{label:a.name,name:a.name}},[t.current(a,"品牌管理")?s("BrandList"):t._e(),t.current(a,"供应商管理")?s("SupplierList"):t._e(),t.current(a,"商品单位设置")?s("UnitList"):t._e()],1)})),1)],1)},q=[],K=function(){var t=this,s=t._self._c;return s("div",{staticClass:"BrandList"},[s("div",{staticClass:"search"},[s("div",{staticClass:"left"}),s("div",{staticClass:"right"},[s("div",{staticClass:"add-bt",on:{click:function(s){return t.showModal("新增品牌","Brand")}}},[t._v(" 新增品牌 ")])])]),s("div",{staticClass:"list"},[s("vxe-table",{ref:"xTable",attrs:{"cell-style":{textAlign:"center"},"column-config":{resizable:!0},data:t.tableData,"header-align":"center",height:t.tableHeight,loading:t.loading,"row-config":{isHover:!0},size:"small"}},[t._l(t.tableColumns,(function(t,a){return s("vxe-column",{key:a+t.key,attrs:{field:t.key,fixed:t.fixed,"min-width":t.width,"show-overflow":"title",title:t.title}})})),s("vxe-column",{attrs:{title:"操作",width:"120"}},[[s("span",{staticClass:"bt"},[t._v("编辑")]),s("span",{staticClass:"bt"},[t._v("下架")])]],2)],2),s("div",{staticClass:"page"},[s("Page",{attrs:{current:t.searchData.p,"page-size":t.searchData.page,"show-elevator":"","show-sizer":"",size:"small",total:t.searchData.count,transfer:""},on:{"on-change":t.currentPage,"on-page-size-change":t.pageSizeChange}})],1)],1),s("Modal",{attrs:{"footer-hide":!0,title:t.modal.title},model:{value:t.modal.show,callback:function(s){t.$set(t.modal,"show",s)},expression:"modal.show"}},[t.modalShow("Brand")?s("Brand"):t._e()],1)],1)},Q=[],X=function(){var t=this,s=t._self._c;return s("div",{staticClass:"Brand"},[s("div",{staticClass:"box"},[s("div",{staticClass:"row"},[s("div",{staticClass:"left"},[t._v("品牌名称")]),s("div",{staticClass:"right"},[s("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入品牌名称"}})],1)]),s("div",{staticClass:"row"},[s("div",{staticClass:"left"},[t._v("序号")]),s("div",{staticClass:"right"},[s("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入数字，数字越小排名越靠前"}})],1)])]),t._m(0)])},Y=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"footer"},[s("div",{staticClass:"bt"},[t._v("保存")])])}],tt={name:"Brand",data:function(){return{}},methods:{}},st=tt,at=(0,f.Z)(st,X,Y,!1,null,"00dfbc88",null),et=at.exports,it={name:"BrandList",components:{Brand:et},data:function(){return{loading:!1,tableHeight:0,tableData:[{0:"测试测试"}],tableColumns:[{title:"序号",key:"0"},{title:"品牌名称",key:"1"}],modal:{show:!1,title:"",type:!1},searchData:{search:"",start_time:"",end_time:"",p:1,page:10,count:0},date:[]}},computed:{modalShow(){return t=>this.modal.type===t&&this.modal.show}},activated(){},created(){},mounted(){this.setHeight(),window.onresize=()=>{this.setHeight()}},methods:{setHeight(){this.tableHeight=window.innerHeight-286},clearDate(){this.searchData.start="",this.searchData.end=""},currentPage(t){this.searchData.p=t,this.getList()},pageSizeChange(t){this.searchData.page=t,this.search()},search(){this.searchData.p=1,this.getList()},showModal(t,s,a={}){console.log(a),this.modal.show=!0,this.modal.title=t,this.modal.type=s}}},lt=it,ot=(0,f.Z)(lt,K,Q,!1,null,"09616767",null),rt=ot.exports,ct=function(){var t=this,s=t._self._c;return s("div",{staticClass:"BrandList"},[s("div",{staticClass:"search"},[s("div",{staticClass:"left"}),s("div",{staticClass:"right"},[s("div",{staticClass:"add-bt",on:{click:function(s){return t.showModal("新增供应商","Supplier")}}},[t._v(" 新增供应商 ")])])]),s("div",{staticClass:"list"},[s("vxe-table",{ref:"xTable",attrs:{"cell-style":{textAlign:"center"},"column-config":{resizable:!0},data:t.tableData,"header-align":"center",height:t.tableHeight,loading:t.loading,"row-config":{isHover:!0},size:"small"}},[t._l(t.tableColumns,(function(t,a){return s("vxe-column",{key:a+t.key,attrs:{field:t.key,fixed:t.fixed,"min-width":t.width,"show-overflow":"title",title:t.title}})})),s("vxe-column",{attrs:{title:"操作",width:"120"}},[[s("span",{staticClass:"bt"},[t._v("编辑")]),s("span",{staticClass:"bt"},[t._v("下架")])]],2)],2),s("div",{staticClass:"page"},[s("Page",{attrs:{current:t.searchData.p,"page-size":t.searchData.page,"show-elevator":"","show-sizer":"",size:"small",total:t.searchData.count,transfer:""},on:{"on-change":t.currentPage,"on-page-size-change":t.pageSizeChange}})],1)],1),s("Modal",{attrs:{"footer-hide":!0,title:t.modal.title},model:{value:t.modal.show,callback:function(s){t.$set(t.modal,"show",s)},expression:"modal.show"}},[t.modalShow("Supplier")?s("Supplier"):t._e()],1)],1)},nt=[],dt=function(){var t=this,s=t._self._c;return s("div",{staticClass:"Supplier"},[s("div",{staticClass:"box"},[s("div",{staticClass:"row"},[s("div",{staticClass:"left"},[t._v("供应商名称")]),s("div",{staticClass:"right"},[s("Input",{attrs:{placeholder:"请输入供应商名称"}})],1)]),s("div",{staticClass:"row"},[s("div",{staticClass:"left"},[t._v("联系人")]),s("div",{staticClass:"right"},[s("Input",{attrs:{placeholder:"请输入联系人"}})],1)]),s("div",{staticClass:"row"},[s("div",{staticClass:"left"},[t._v("联系方式")]),s("div",{staticClass:"right"},[s("Input",{attrs:{placeholder:"请输入联系方式"}})],1)]),s("div",{staticClass:"row"},[s("div",{staticClass:"left"},[t._v("地址信息")]),s("div",{staticClass:"right"},[s("Input",{attrs:{placeholder:"请输入地址信息"}})],1)]),s("div",{staticClass:"row"},[s("div",{staticClass:"left"},[t._v("结算方式")]),s("div",{staticClass:"right"},[s("Input",{attrs:{placeholder:"请输入结算方式"}})],1)]),s("div",{staticClass:"row"},[s("div",{staticClass:"left"},[t._v("结算天数")]),s("div",{staticClass:"right"},[s("Input",{attrs:{placeholder:"请输入结算天数"}})],1)]),s("div",{staticClass:"row"},[s("div",{staticClass:"left"},[t._v("开户银行")]),s("div",{staticClass:"right"},[s("Input",{attrs:{placeholder:"请输入开户银行"}})],1)]),s("div",{staticClass:"row"},[s("div",{staticClass:"left"},[t._v("银行卡号")]),s("div",{staticClass:"right"},[s("Input",{attrs:{placeholder:"请输入银行卡号"}})],1)]),s("div",{staticClass:"row"},[s("div",{staticClass:"left"},[t._v("序号")]),s("div",{staticClass:"right"},[s("Input",{attrs:{placeholder:"请输入数字，数字越小越靠前"}})],1)])]),t._m(0)])},ht=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"footer"},[s("div",{staticClass:"bt"},[t._v("保存")])])}],vt={name:"Supplier",methods:{}},pt=vt,ut=(0,f.Z)(pt,dt,ht,!1,null,"6c4899dd",null),mt=ut.exports,_t={name:"BrandList",components:{Supplier:mt},data:function(){return{loading:!1,tableHeight:0,tableData:[{0:"测试测试"}],tableColumns:[{title:"序号",key:"0"},{title:"供应商名称",key:"1"},{title:"联系人",key:"2"},{title:"联系方式",key:"3"},{title:"地址信息",key:"4"}],modal:{show:!1,title:"",type:!1},searchData:{search:"",start_time:"",end_time:"",p:1,page:10,count:0},date:[]}},computed:{modalShow(){return t=>this.modal.type===t&&this.modal.show}},activated(){},created(){},mounted(){this.setHeight(),window.onresize=()=>{this.setHeight()}},methods:{setHeight(){this.tableHeight=window.innerHeight-286},clearDate(){this.searchData.start="",this.searchData.end=""},currentPage(t){this.searchData.p=t,this.getList()},pageSizeChange(t){this.searchData.page=t,this.search()},search(){this.searchData.p=1,this.getList()},showModal(t,s,a={}){console.log(a),this.modal.show=!0,this.modal.title=t,this.modal.type=s}}},ft=_t,Ct=(0,f.Z)(ft,ct,nt,!1,null,"3b3182b0",null),gt=Ct.exports,wt=function(){var t=this,s=t._self._c;return s("div",{staticClass:"UnitList"},[s("div",{staticClass:"search"},[s("div",{staticClass:"left"}),s("div",{staticClass:"right"},[s("div",{staticClass:"add-bt",on:{click:function(s){return t.showModal("新增商品单位","Unit")}}},[t._v(" 新增商品单位 ")])])]),s("div",{staticClass:"list"},[s("vxe-table",{ref:"xTable",attrs:{"cell-style":{textAlign:"center"},"column-config":{resizable:!0},data:t.tableData,"header-align":"center",height:t.tableHeight,loading:t.loading,"row-config":{isHover:!0},size:"small"}},[t._l(t.tableColumns,(function(t,a){return s("vxe-column",{key:a+t.key,attrs:{field:t.key,fixed:t.fixed,"min-width":t.width,"show-overflow":"title",title:t.title}})})),s("vxe-column",{attrs:{title:"操作",width:"120"}},[[s("span",{staticClass:"bt"},[t._v("编辑")]),s("span",{staticClass:"bt"},[t._v("下架")])]],2)],2),s("div",{staticClass:"page"},[s("Page",{attrs:{current:t.searchData.p,"page-size":t.searchData.page,"show-elevator":"","show-sizer":"",size:"small",total:t.searchData.count,transfer:""},on:{"on-change":t.currentPage,"on-page-size-change":t.pageSizeChange}})],1)],1),s("Modal",{attrs:{"footer-hide":!0,title:t.modal.title},model:{value:t.modal.show,callback:function(s){t.$set(t.modal,"show",s)},expression:"modal.show"}},[t.modalShow("Unit")?s("Unit"):t._e()],1)],1)},bt=[],yt=function(){var t=this,s=t._self._c;return s("div",{staticClass:"Unit"},[s("div",{staticClass:"box"},[s("div",{staticClass:"row"},[s("div",{staticClass:"left"},[t._v("商品单位名称")]),s("div",{staticClass:"right"},[s("Input",{attrs:{placeholder:"请输入商品单位名称"}})],1)]),s("div",{staticClass:"row"},[s("div",{staticClass:"left"},[t._v("序号")]),s("div",{staticClass:"right"},[s("Input",{attrs:{placeholder:"请输入数字，数字越小越靠前"}})],1)]),s("div",{staticClass:"bt"},[s("Icon",{attrs:{type:"md-add"}}),t._v(" 继续添加 ")],1)]),t._m(0)])},xt=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"footer"},[s("div",{staticClass:"bt"},[t._v("保存")])])}],Dt={name:"Unit",methods:{}},St=Dt,kt=(0,f.Z)(St,yt,xt,!1,null,"7b4184e2",null),Tt=kt.exports,Lt={name:"UnitList",components:{Unit:Tt},data:function(){return{loading:!1,tableHeight:0,tableData:[{0:"测试测试"}],tableColumns:[{title:"序号",key:"0"},{title:"商品单位",key:"1"}],modal:{show:!1,title:"",type:!1},date:[],searchData:{p:1,page:10,count:0}}},computed:{modalShow(){return t=>this.modal.type===t&&this.modal.show}},activated(){},created(){},mounted(){this.setHeight(),window.onresize=()=>{this.setHeight()}},methods:{setHeight(){this.tableHeight=window.innerHeight-286},clearDate(){this.searchData.start="",this.searchData.end=""},currentPage(t){this.searchData.p=t,this.getList()},pageSizeChange(t){this.searchData.page=t,this.search()},search(){this.searchData.p=1,this.getList()},showModal(t,s,a={}){console.log(a),this.modal.show=!0,this.modal.title=t,this.modal.type=s}}},Pt=Lt,$t=(0,f.Z)(Pt,wt,bt,!1,null,"3b6be59b",null),zt=$t.exports,Rt={name:"Supplier",components:{BrandList:rt,SupplierList:gt,UnitList:zt},data:function(){return{tab_index:"品牌管理",tab_list:[{name:"品牌管理",id:1},{name:"供应商管理",id:2},{name:"商品单位设置",id:3}]}},computed:{current(){return(t,s)=>s===t.name&&this.tab_index===s}},methods:{handleTabClick(t){this.tab_index=t}}},Ht=Rt,It=(0,f.Z)(Ht,J,q,!1,null,"4c87cfe4",null),Gt=It.exports,Zt=function(){var t=this,s=t._self._c;return s("div",{staticClass:"Supplier"},[s("Tabs",{attrs:{size:"small"},on:{"on-click":t.handleTabClick},model:{value:t.tab_index,callback:function(s){t.tab_index=s},expression:"tab_index"}},t._l(t.tab_list,(function(a){return s("TabPane",{key:a.id,attrs:{label:a.name,name:a.name}},[t.current(a,"项目类别设置")?s("ServiceList"):t._e()],1)})),1)],1)},Et=[],Ft=function(){var t=this,s=t._self._c;return s("div",{staticClass:"ServiceList"},[s("div",{staticClass:"search"},[s("div",{staticClass:"left"}),s("div",{staticClass:"right"},[s("div",{staticClass:"add-bt",on:{click:function(s){return t.showModal("新增一级类别","Service")}}},[t._v(" 新增一级类别 ")])])]),s("div",{staticClass:"list"},[s("div",{staticClass:"page"},[s("Page",{attrs:{current:t.searchData.p,"page-size":t.searchData.page,"show-elevator":"","show-sizer":"",size:"small",total:t.searchData.count,transfer:""},on:{"on-change":t.currentPage,"on-page-size-change":t.pageSizeChange}})],1)]),s("Modal",{attrs:{"footer-hide":!0,title:t.modal.title},model:{value:t.modal.show,callback:function(s){t.$set(t.modal,"show",s)},expression:"modal.show"}},[t.modalShow("Service")?s("Service"):t._e()],1)],1)},Mt=[],Nt=function(){var t=this,s=t._self._c;return s("div",{staticClass:"Service"},[s("div",{staticClass:"box"},[s("div",{staticClass:"row"},[s("div",{staticClass:"left"},[t._v("项目一级分类名称")]),s("div",{staticClass:"right"},[s("Input",{attrs:{placeholder:"请输入项目一级分类名称"}})],1)]),s("div",{staticClass:"row"},[s("div",{staticClass:"left"},[t._v("序号")]),s("div",{staticClass:"right"},[s("Input",{attrs:{placeholder:"请输入数字，数字越小越靠前"}})],1)]),s("div",{staticClass:"bt"},[s("Icon",{attrs:{type:"md-add"}}),t._v(" 继续添加 ")],1)]),t._m(0)])},Vt=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"footer"},[s("div",{staticClass:"bt"},[t._v("保存")])])}],At={name:"Service",methods:{}},Bt=At,Ot=(0,f.Z)(Bt,Nt,Vt,!1,null,"83083788",null),jt=Ot.exports,Ut={name:"ServiceList",components:{Service:jt},data:function(){return{loading:!1,modal:{show:!1,title:"",type:!1},columns:[{title:"项目一级类别",key:"first_name"},{title:"二级分类",key:"second_name"},{title:"操作",width:"300px",type:"template",template:"action"}],list:[{first_name:"产后修复",second_name:"",children:[{first_name:"",second_name:"体验项目",children:[]}]}],date:[],searchData:{p:1,page:10,count:0}}},computed:{modalShow(){return t=>this.modal.type===t&&this.modal.show}},activated(){},created(){},methods:{clearDate(){this.searchData.start="",this.searchData.end=""},currentPage(t){this.searchData.p=t,this.getList()},pageSizeChange(t){this.searchData.page=t,this.search()},search(){this.searchData.p=1,this.getList()},showModal(t,s,a={}){console.log(a),this.modal.show=!0,this.modal.title=t,this.modal.type=s},handle(t){console.log(t)}}},Wt=Ut,Jt=(0,f.Z)(Wt,Ft,Mt,!1,null,"88c1994e",null),qt=Jt.exports,Kt={name:"Supplier",components:{ServiceList:qt},data:function(){return{tab_index:"项目类别设置",tab_list:[{name:"项目类别设置",id:1},{name:"套餐次卡类别设置",id:2},{name:"商品类别设置",id:3}]}},computed:{current(){return(t,s)=>s===t.name&&this.tab_index===s}},methods:{handleTabClick(t){this.tab_index=t}}},Qt=Kt,Xt=(0,f.Z)(Qt,Zt,Et,!1,null,"0b14ecb2",null),Yt=Xt.exports,ts=function(){var t=this,s=t._self._c;return s("div",{staticClass:"GoodsList"},[s("div",{staticClass:"search"},[s("div",{staticClass:"left"},[s("div",{staticClass:"box"},[s("Input",{staticStyle:{width:"250px"},attrs:{clearable:"","enter-button":"",placeholder:"输入分类名称/商品名称",search:""},on:{"on-clear":t.search,"on-search":t.search}})],1),s("div",{staticClass:"box"},[s("span",{staticClass:"text"},[t._v("商品分类")]),s("SelectProductType",{on:{"on-select":t.search},model:{value:t.searchData.goods_type_id,callback:function(s){t.$set(t.searchData,"goods_type_id",s)},expression:"searchData.goods_type_id"}})],1),s("div",{staticClass:"box"},[s("span",{staticClass:"text"},[t._v("适用门店")]),s("SelectShop",{on:{"on-select":t.search},model:{value:t.searchData.sid,callback:function(s){t.$set(t.searchData,"sid",s)},expression:"searchData.sid"}})],1),s("div",{staticClass:"box"},[s("span",{staticClass:"text"},[t._v("状态")]),s("SelectGoodsStatus",{on:{"on-select":t.search},model:{value:t.searchData.status,callback:function(s){t.$set(t.searchData,"status",s)},expression:"searchData.status"}})],1)]),s("div",{staticClass:"right"},[s("div",{staticClass:"add-bt",on:{click:function(s){return t.showModal("新增商品","Goods")}}},[t._v(" 新增商品 ")]),s("div",{staticClass:"add-bt"},[t._v("导入商品")]),s("div",{staticClass:"add-bt",on:{click:t.exportDataEvent}},[t._v("导出商品")])])]),s("div",{staticClass:"list"},[s("vxe-table",{ref:"xTable",attrs:{"cell-style":{textAlign:"center"},"column-config":{resizable:!0},data:t.tableData,"header-align":"center",height:t.tableHeight,loading:t.loading,"row-config":{isHover:!0},size:"small"}},[t._l(t.tableColumns,(function(t,a){return s("vxe-column",{key:a+t.key,attrs:{field:t.key,fixed:t.fixed,"min-width":t.width,"show-overflow":"title",title:t.title}})})),s("vxe-column",{attrs:{title:"操作",width:"120"}},[[s("span",{staticClass:"bt"},[t._v("编辑")]),s("span",{staticClass:"bt"},[t._v("下架")])]],2)],2),s("div",{staticClass:"page"},[s("Page",{attrs:{current:t.searchData.p,"page-size":t.searchData.page,"show-elevator":"","show-sizer":"",size:"small",total:t.searchData.count,transfer:""},on:{"on-change":t.currentPage,"on-page-size-change":t.pageSizeChange}})],1)],1),s("Modal",{attrs:{"footer-hide":!0,scrollable:t.modal.scrollable,styles:t.modal.styles,title:t.modal.title,width:t.modal.width},model:{value:t.modal.show,callback:function(s){t.$set(t.modal,"show",s)},expression:"modal.show"}},[t.modalShow("Goods")?s("Goods"):t._e()],1)],1)},ss=[],as=function(){var t=this,s=t._self._c;return s("div",{staticClass:"Goods"},[s("div",{staticClass:"box"},[s("div",{staticClass:"left"},[t._m(0),s("div",{staticClass:"form"},[s("div",{staticClass:"row"},[t._m(1),s("div",{staticClass:"r"},[s("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入商品名称"}})],1)]),s("div",{staticClass:"row"},[t._m(2),s("div",{staticClass:"r"},[s("SelectShop")],1)]),s("div",{staticClass:"row"},[t._m(3),s("div",{staticClass:"r"},[s("Input",{staticStyle:{width:"200px",padding:"0 2px"},attrs:{placeholder:"请输入金额"}}),s("span",{staticStyle:{color:"#f19ec2",cursor:"pointer"},on:{click:function(s){return t.show(s)}}},[t._v(" "+t._s(t.dropdown.title)+" "),s("Icon",{attrs:{size:16,type:"md-arrow-dropright"}})],1),t.dropdown.show?s("div",{staticClass:"dropdown"},[s("div",{staticClass:"row"},[s("div",{staticClass:"dropdown-l"},[t._v("武汉总店")]),s("div",{staticClass:"dropdown-r"},[s("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入金额"}},[s("span",{attrs:{slot:"append"},slot:"append"},[t._v("￥")])])],1)]),s("div",{staticClass:"row"},[s("div",{staticClass:"dropdown-l"},[t._v("惠城总店")]),s("div",{staticClass:"dropdown-r"},[s("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入金额"}},[s("span",{attrs:{slot:"append"},slot:"append"},[t._v("￥")])])],1)])]):t._e()],1)]),s("div",{staticClass:"row"},[t._m(4),s("div",{staticClass:"r"},[s("SelectUnit"),s("span",{staticStyle:{color:"#f19ec2",cursor:"pointer"}},[t._v("商品单位管理")])],1)]),s("div",{staticClass:"row"},[t._m(5),s("div",{staticClass:"r"},[s("SelectProductType",{on:{"on-select":t.productType},model:{value:t.formData.goods_type_id,callback:function(s){t.$set(t.formData,"goods_type_id",s)},expression:"formData.goods_type_id"}})],1)])])]),s("div",{staticClass:"right"},[s("div",{staticClass:"header"},[s("span",{staticClass:"title"},[t._v("其他信息")]),s("Poptip",{attrs:{placement:"left-start",transfer:"",trigger:"hover"}},[s("div",{staticClass:"explain"},[t._v("?字段说明")]),s("div",{attrs:{slot:"content"},slot:"content"},[s("div",{staticClass:"fields-remark"},[s("p",{staticClass:"text"},[s("span",{staticStyle:{"font-weight":"bold"}},[t._v("商品名称：")]),t._v(" 商品名称不要超过50个字。适用门店：设置哪些门店可以经营该商品。 ")]),s("p",{staticClass:"text"},[s("span",{staticStyle:{"font-weight":"bold"}},[t._v("统一售价：")]),t._v(" 若存在不同门店不同的定价,请展开按门店设置价格。 ")]),s("p",{staticClass:"text"},[s("span",{staticStyle:{"font-weight":"bold"}},[t._v("服务时长：")]),t._v(" 由此判断预约表每个会员预约的老师所需时长,避免控期。 ")]),s("p",{staticClass:"text"},[s("span",{staticStyle:{"font-weight":"bold"}},[t._v("是否课程：")]),t._v(" 项口与课程预约表不同,如瑜伽、亲子洗游等。 ")]),s("p",{staticClass:"text"},[s("span",{staticStyle:{"font-weight":"bold"}},[t._v("项日分类：")]),t._v(" (推荐完善)方便收银和设置卡的时候快速筛选和指定折扣。 ")]),s("p",{staticClass:"text"},[s("span",{staticStyle:{"font-weight":"bold"}},[t._v("线上可预约：")]),t._v(" 开启后该商品就会在公众号的预约中显示出来 ")]),s("p",{staticClass:"text"},[s("span",{staticStyle:{"font-weight":"bold"}},[t._v("商品关联商品：")]),t._v(" 关联之后,商品所消耗的产品会从库存扣除 ")]),s("p",{staticClass:"text"},[s("span",{staticStyle:{"font-weight":"bold"}},[t._v("项口体验价：")]),t._v(" 在客户第一次体验该商品的时候可以享受的特殊优惠价格。 ")]),s("p",{staticClass:"text"},[s("span",{staticStyle:{"font-weight":"bold"}},[t._v("商品状态：")]),s("br"),t._v(" 上架：可以在系统中售卖该商品 "),s("br"),t._v(" 下架：不可在系统中售卖该项日 ")]),s("p",{staticClass:"text"},[s("span",{staticStyle:{"font-weight":"bold"}},[t._v("商品配图：")]),t._v(" 针对线上商城首图 ")]),s("p",{staticClass:"text"},[s("span",{staticStyle:{"font-weight":"bold"}},[t._v("商品详情：")]),t._v(" 针对该商品的详情介绍,可文字、图片,主要在商城展示 ")])])])])],1),s("div",{staticClass:"form"},[s("div",{staticClass:"row"},[s("div",{staticClass:"l"},[t._v("商品状态")]),s("div",{staticClass:"r"},[s("RadioGroup",[s("Radio",{attrs:{label:"是"}},[s("span",[t._v("上架")])]),s("Radio",{attrs:{label:"否"}},[s("span",[t._v("下架")])])],1)],1)]),s("div",{staticClass:"row"},[s("div",{staticClass:"l"},[t._v("商品编号")]),s("div",{staticClass:"r"},[s("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入商品编号"}})],1)]),s("div",{staticClass:"row"},[t._m(6),s("div",{staticClass:"r"},[s("SelectBrand",{on:{"on-select":t.brand},model:{value:t.formData.brand_id,callback:function(s){t.$set(t.formData,"brand_id",s)},expression:"formData.brand_id"}}),s("span",{staticStyle:{color:"#f19ec2",cursor:"pointer"}},[t._v("品牌管理")])],1)]),s("div",{staticClass:"row"},[s("div",{staticClass:"l"},[t._v("商品形态")]),s("div",{staticClass:"r"},[s("RadioGroup",[s("Radio",{attrs:{label:"液体"}},[s("span",[t._v("液体")])]),s("Radio",{attrs:{label:"粉末"}},[s("span",[t._v("粉末")])])],1)],1)]),s("div",{staticClass:"row"},[t._m(7),s("div",{staticClass:"r"},[s("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入商品容量"}}),s("SelectUnit",{on:{"on-select":t.unit},model:{value:t.formData.unit,callback:function(s){t.$set(t.formData,"unit",s)},expression:"formData.unit"}}),s("span",{staticStyle:{color:"#f19ec2",cursor:"pointer"}},[t._v("单位管理")])],1)]),s("div",{staticClass:"row"},[t._m(8),s("div",{staticClass:"r"},[s("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入保质期"}}),t._v(" 月 ")],1)]),s("div",{staticClass:"row"},[s("div",{staticClass:"l"},[t._v("商品配图")]),s("div",{staticClass:"r"},[s("UploadImage",{attrs:{"default-list":t.defaultList},on:{remove:t.removeFile,uploadFile:t.uploadFile}}),t._v(" 建议尺寸图片750*750 ")],1)]),t._m(9)])])]),s("div",{staticClass:"footer"},[s("div",{staticClass:"bt",on:{click:t.getEditorData}},[t._v("保存")])])])},es=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"header"},[s("span",{staticClass:"red"},[t._v("*")]),s("span",{staticStyle:{"font-weight":"bold"}},[t._v("基础信息")]),s("span",{staticClass:"notice"},[t._v("带*为必填项")])])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"l"},[s("span",{staticClass:"red"},[t._v("*")]),t._v(" 商品名称 ")])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"l"},[s("span",{staticClass:"red"},[t._v("*")]),t._v(" 适用门店 ")])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"l"},[s("span",{staticClass:"red"},[t._v("*")]),t._v(" 统一售价 ")])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"l"},[s("span",{staticClass:"red"},[t._v("*")]),t._v(" 商品单位 ")])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"l"},[s("span",{staticClass:"red"},[t._v("*")]),t._v(" 商品分类 ")])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"l"},[s("span",{staticClass:"red"},[t._v("*")]),t._v(" 商品品牌 ")])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"l"},[s("span",{staticClass:"red"},[t._v("*")]),t._v(" 商品容量 ")])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"l"},[s("span",{staticClass:"red"},[t._v("*")]),t._v(" 保质期 ")])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"row"},[s("div",{staticClass:"l"},[t._v("商品详情")]),s("div",{staticClass:"r"},[s("div",{attrs:{id:"editor"}})])])}],is=a(16821),ls=function(){var t=this,s=t._self._c;return s("content",[s("Select",{style:{width:t.width+"px"},attrs:{clearable:"",filterable:"",loading:t.loading,transfer:""},on:{"on-clear":t.clearValue,"on-select":t.selectValue},model:{value:t.valueData,callback:function(s){t.valueData=s},expression:"valueData"}},[s("div",{attrs:{slot:"empty"},slot:"empty"},[t._v("未找到数据")]),t._l(t.list,(function(a,e){return s("Option",{key:e,attrs:{value:a.id}},[t._v(" "+t._s(a.name)+" ")])}))],2)],1)},os=[],rs={props:{value:{type:[String,Number,Array],default:""},width:{type:Number,default:200}},data:function(){return{loading:!1,list:[{id:1,name:"盒"},{id:2,name:"瓶"},{id:3,name:"个"},{id:4,name:"张"}],valueData:"",searchData:{}}},watch:{},created(){this.valueData=this.value},methods:{selectValue(t){this.$emit("input",t.value),this.$emit("on-select",t.value)},clearValue(){this.$emit("input",""),this.$emit("on-select","")}}},cs=rs,ns=(0,f.Z)(cs,ls,os,!1,null,"682da1f5",null),ds=ns.exports,hs={name:"Goods",components:{UploadImage:u.Z,SelectShop:p.Z,SelectProductType:v.Z,SelectUnit:ds,SelectBrand:is.Z},data:function(){return{defaultList:[],editor:null,editorData:"",formData:{brand:"",unit:"",goods_type_id:"",img_id:""},dropdown:{show:!1,title:"展开"}}},mounted(){const t=new(d())("#editor");t.config.onchange=t=>{this.editorData=t,this.$emit("editorContent",t)},t.create(),this.editor=t},methods:{show(t){"ivu-icon ivu-icon-md-arrow-dropright"===t.currentTarget.children[0].className?(t.currentTarget.children[0].className="ivu-icon ivu-icon-md-arrow-dropdown",this.dropdown.title="收起",this.dropdown.show=!0):(t.currentTarget.children[0].className="ivu-icon ivu-icon-md-arrow-dropright",this.dropdown.title="展开",this.dropdown.show=!1)},getEditorData(){let t=this.editor.txt.html();alert(t)},beforeDestroy(){this.editor.destroy(),this.editor=null},removeFile(t){console.log(t,"removeFile"),this.formData.img_id=""},uploadFile(t){this.formData.img_id=t.id,console.log(t,"uploadFile")},brand(){},unit(){},productType(){}}},vs=hs,ps=(0,f.Z)(vs,as,es,!1,null,"aa729b42",null),us=ps.exports,ms=function(){var t=this,s=t._self._c;return s("content",[s("Select",{style:{width:t.width+"px"},attrs:{clearable:"",filterable:"",loading:t.loading,transfer:""},on:{"on-clear":t.clearValue,"on-select":t.selectValue},model:{value:t.valueData,callback:function(s){t.valueData=s},expression:"valueData"}},[s("div",{attrs:{slot:"empty"},slot:"empty"},[t._v("未找到数据")]),t._l(t.list,(function(a,e){return s("Option",{key:e,attrs:{value:a.id}},[t._v(" "+t._s(a.name)+" ")])}))],2)],1)},_s=[],fs={props:{value:{type:[String,Number,Array],default:""},width:{type:Number,default:200}},data:function(){return{loading:!1,list:[{id:1,name:"全部"},{id:2,name:"上架"},{id:3,name:"下架"}],valueData:"",searchData:{}}},watch:{},created(){this.valueData=this.value},methods:{selectValue(t){this.$emit("input",t.value),this.$emit("on-select",t.value)},clearValue(){this.$emit("input",""),this.$emit("on-select","")}}},Cs=fs,gs=(0,f.Z)(Cs,ms,_s,!1,null,"0ee170ce",null),ws=gs.exports,bs={name:"GoodsList",components:{SelectGoodsStatus:ws,SelectProductType:v.Z,SelectShop:p.Z,Goods:us},data:function(){return{loading:!1,tableHeight:0,tableData:[{0:"测试测试"}],tableColumns:[{title:"商品分类",key:"0",width:"200px"},{title:"商品编号",key:"1"},{title:"商品名称",key:"2"},{title:"商品售价",key:"3"},{title:"商品状态",key:"4"}],searchData:{sid:"",goods_type_id:"",status:"",search:"",start_time:"",end_time:"",p:1,page:10,count:0},date:[],modal:{show:!1,title:"",type:!1,width:1e3,scrollable:!0,styles:{top:"50px"}}}},computed:{modalShow(){return t=>this.modal.type===t&&this.modal.show}},activated(){},created(){},mounted(){this.setHeight(),window.onresize=()=>{this.setHeight()}},methods:{setHeight(){this.tableHeight=window.innerHeight-264},clearDate(){this.searchData.start="",this.searchData.end=""},currentPage(t){this.searchData.p=t,this.getList()},pageSizeChange(t){this.searchData.page=t,this.search()},search(){this.searchData.p=1,this.getList()},showModal(t,s,a){console.log(a),this.modal.show=!0,this.modal.title=t,this.modal.type=s,this.modal.width=window.innerWidth-300},exportDataEvent(){setTimeout((()=>{const t=[];this.$refs.xTable.exportData({filename:"",type:"csv",isHeader:!0,isFooter:!0,data:t})}),100)}}},ys=bs,xs=(0,f.Z)(ys,ts,ss,!1,null,"fd907878",null),Ds=xs.exports,Ss=function(){var t=this,s=t._self._c;return s("div",{staticClass:"ValueCardList"},[s("div",{staticClass:"search"},[s("div",{staticClass:"left"},[s("div",{staticClass:"box"},[s("Input",{staticStyle:{width:"250px"},attrs:{clearable:"","enter-button":"",placeholder:"输入分类名称/储值卡名称",search:""},on:{"on-clear":t.search,"on-search":t.search}})],1),s("div",{staticClass:"box"},[s("span",{staticClass:"text"},[t._v("储值卡分类")]),s("SelectProductType",{on:{"on-select":t.search},model:{value:t.searchData.goods_type_id,callback:function(s){t.$set(t.searchData,"goods_type_id",s)},expression:"searchData.goods_type_id"}})],1),s("div",{staticClass:"box"},[s("span",{staticClass:"text"},[t._v("适用门店")]),s("SelectShop",{on:{"on-select":t.search},model:{value:t.searchData.sid,callback:function(s){t.$set(t.searchData,"sid",s)},expression:"searchData.sid"}})],1),s("div",{staticClass:"box"},[s("span",{staticClass:"text"},[t._v("状态")]),s("SelectGoodsStatus",{on:{"on-select":t.search},model:{value:t.searchData.status,callback:function(s){t.$set(t.searchData,"status",s)},expression:"searchData.status"}})],1)]),s("div",{staticClass:"right"},[s("div",{staticClass:"add-bt",on:{click:function(s){return t.showModal("新增储值卡","ValueCard")}}},[t._v(" 新增储值卡 ")])])]),s("div",{staticClass:"list"},[s("vxe-table",{ref:"xTable",attrs:{"cell-style":{textAlign:"center"},"column-config":{resizable:!0},data:t.tableData,"header-align":"center",height:t.tableHeight,loading:t.loading,"row-config":{isHover:!0},size:"small"}},[t._l(t.tableColumns,(function(t,a){return s("vxe-column",{key:a+t.key,attrs:{field:t.key,fixed:t.fixed,"min-width":t.width,"show-overflow":"title",title:t.title}})})),s("vxe-column",{attrs:{title:"操作",width:"120"}},[[s("span",{staticClass:"bt"},[t._v("编辑")]),s("span",{staticClass:"bt"},[t._v("下架")])]],2)],2),s("div",{staticClass:"page"},[s("Page",{attrs:{current:t.searchData.p,"page-size":t.searchData.page,"show-elevator":"","show-sizer":"",size:"small",total:t.searchData.count,transfer:""},on:{"on-change":t.currentPage,"on-page-size-change":t.pageSizeChange}})],1)],1),s("Modal",{attrs:{"footer-hide":!0,scrollable:t.modal.scrollable,styles:t.modal.styles,title:t.modal.title,width:t.modal.width},model:{value:t.modal.show,callback:function(s){t.$set(t.modal,"show",s)},expression:"modal.show"}},[t.modalShow("ValueCard")?s("ValueCard"):t._e()],1)],1)},ks=[],Ts=function(){var t=this,s=t._self._c;return s("div",{staticClass:"ValueCard"},[s("div",{staticClass:"box"},[s("div",{staticClass:"left"},[t._m(0),s("div",{staticClass:"form"},[s("div",{staticClass:"row"},[t._m(1),s("div",{staticClass:"r"},[s("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入储值卡名称"}})],1)]),s("div",{staticClass:"row"},[t._m(2),s("div",{staticClass:"r"},[s("SelectShop")],1)]),s("div",{staticClass:"row"},[t._m(3),s("div",{staticClass:"r"},[s("Input",{staticStyle:{width:"200px",padding:"0 2px"},attrs:{placeholder:"请输入金额"}}),s("span",{staticStyle:{color:"#f19ec2",cursor:"pointer"},on:{click:function(s){return t.show(s)}}},[t._v(" "+t._s(t.dropdown.title)+" "),s("Icon",{attrs:{size:16,type:"md-arrow-dropright"}})],1),t.dropdown.show?s("div",{staticClass:"dropdown"},[s("div",{staticClass:"row"},[s("div",{staticClass:"dropdown-l"},[t._v("武汉总店")]),s("div",{staticClass:"dropdown-r"},[s("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入金额"}},[s("span",{attrs:{slot:"append"},slot:"append"},[t._v("￥")])])],1)]),s("div",{staticClass:"row"},[s("div",{staticClass:"dropdown-l"},[t._v("惠城总店")]),s("div",{staticClass:"dropdown-r"},[s("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入金额"}},[s("span",{attrs:{slot:"append"},slot:"append"},[t._v("￥")])])],1)])]):t._e()],1)]),s("div",{staticClass:"row"},[t._m(4),s("div",{staticClass:"r"},[s("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入储值卡面额"}})],1)]),s("div",{staticClass:"row"},[t._m(5),s("div",{staticClass:"r"},[s("SelectProductType",{on:{"on-select":t.productType},model:{value:t.formData.goods_type_id,callback:function(s){t.$set(t.formData,"goods_type_id",s)},expression:"formData.goods_type_id"}})],1)]),s("div",{staticClass:"row"},[t._m(6),s("div",{staticClass:"r"},[0===t.formData.ruleList.length?s("div",{staticClass:"bt",on:{click:t.showRuleProducts}},[t._v(" 设置本张储值卡的使用规则 ")]):s("table",{staticStyle:{width:"100%"}},[s("tr",[s("td",{attrs:{colspan:"3"}},[s("Button",{staticStyle:{margin:"4px 2px"},attrs:{size:"small",type:"primary"},on:{click:t.delRuleList}},[t._v(" 全部删除 ")]),s("Button",{attrs:{size:"small",type:"primary"},on:{click:t.showRuleProducts}},[t._v(" 编辑 ")])],1)]),t._m(7),t._l(t.formData.ruleList,(function(a,e){return s("tr",{key:e},[s("td",[t._v(t._s(a.name))]),s("td",t._l(a.shopList,(function(a,e){return s("div",{key:e},[t._v(" "+t._s(a.name)+" : "+t._s(a.discount)+"折 ")])})),0)])}))],2)])]),s("div",{staticClass:"row"},[t._m(8),s("div",{staticClass:"r"},[s("RadioGroup",[s("Radio",{attrs:{label:"1"}},[s("span",[t._v("购买时间")])]),s("Radio",{attrs:{label:"2"}},[s("span",[t._v("首次使用时间")])]),s("Radio",{attrs:{label:"3"}},[s("span",[t._v("指定日期")])])],1)],1)]),s("div",{staticClass:"row"},[t._m(9),s("div",{staticClass:"r"},[s("RadioGroup",[s("Radio",{attrs:{label:"1"}},[s("span",[t._v("不限时长")])]),s("Radio",{attrs:{label:"2"}},[s("span",[t._v("固定时长")])]),s("Radio",{attrs:{label:"3"}},[s("span",[t._v("指定日期")])])],1)],1)])])]),s("div",{staticClass:"right"},[s("div",{staticClass:"header"},[s("span",{staticClass:"title"},[t._v("其他信息")]),s("Poptip",{attrs:{placement:"left-start",transfer:"",trigger:"hover"}},[s("div",{staticClass:"explain"},[t._v("?字段说明")]),s("div",{attrs:{slot:"content"},slot:"content"},[s("div",{staticClass:"fields-remark"},[s("p",{staticClass:"text"},[s("span",{staticStyle:{"font-weight":"bold"}},[t._v("储值卡名称:")]),t._v(" 套餐名称不要超过50个字。 ")]),s("p",{staticClass:"text"},[s("span",{staticStyle:{"font-weight":"bold"}},[t._v("适用门店:")]),t._v(" 设置哪些门店可以经营该储值卡。 ")]),s("p",{staticClass:"text"},[s("span",{staticStyle:{"font-weight":"bold"}},[t._v("统一售价:")]),t._v(" 若存在不同门店不同的定价,请展开按门店设置价格。 ")]),s("p",{staticClass:"text"},[s("span",{staticStyle:{"font-weight":"bold"}},[t._v("储值卡面额:")]),t._v(" 指当前储值卡可用金额。 ")]),s("p",{staticClass:"text"},[s("span",{staticStyle:{"font-weight":"bold"}},[t._v("储值卡分类:")]),t._v(" (推荐完善)方便收银和设置卡的时候快速筛选。 ")]),s("p",{staticClass:"text"},[s("span",{staticStyle:{"font-weight":"bold"}},[t._v("储值卡规则:")]),t._v(" 设置该卡适用的各品项内容,收银时选择对应品项内容可使用对应的储值卡支付。 ")]),s("p",{staticClass:"text"},[s("span",{staticStyle:{"font-weight":"bold"}},[t._v("开始时间:")]),t._v(" 指储值卡生效日期,如果需要规定生效时间,请选择指定日期,可输入日期哦。 ")]),s("p",{staticClass:"text"},[s("span",{staticStyle:{"font-weight":"bold"}},[t._v("结束时间:")]),t._v(" 指储值卡失效日期,如果需要规定失效时间,请选择指定日期,可输入日期峨。 ")]),s("p",{staticClass:"text"},[s("span",{staticStyle:{"font-weight":"bold"}},[t._v("购卡赠送:")]),t._v(" 可以选择购买该卡后系统自动赠送的品项内容。 ")]),s("p",{staticClass:"text"},[s("span",{staticStyle:{"font-weight":"bold"}},[t._v("续充赠送:")]),t._v(" 可以选该卡续充后系统自动赠送的品项内容。 ")]),s("p",{staticClass:"text"},[s("span",{staticStyle:{"font-weight":"bold"}},[t._v("储值卡状态:")]),t._v(" 上架:可以在系统中售卖该套餐下架:不可在系统中售卖该套餐 ")]),s("p",{staticClass:"text"},[s("span",{staticStyle:{"font-weight":"bold"}},[t._v("售卖:")]),t._v(" 指可售卖。 ")]),s("p",{staticClass:"text"},[s("span",{staticStyle:{"font-weight":"bold"}},[t._v("赠送:")]),t._v(" 指该卡可赠送,不选时该卡不会在赠送列表出现。 ")]),s("p",{staticClass:"text"},[s("span",{staticStyle:{"font-weight":"bold"}},[t._v("限购:")]),t._v(" 指每个会员限购次数,超过后不可购买。 ")])])])])],1),s("div",{staticClass:"form"},[s("div",{staticClass:"row"},[t._m(10),s("div",{staticClass:"r"},[0===t.formData.buyGiftList.length?s("div",{staticClass:"bt",on:{click:function(s){return t.showModal("添加","BuyGive")}}},[t._v(" 添加 ")]):s("table",{staticStyle:{width:"100%"}},[s("tr",[s("td",{attrs:{colspan:"3"}},[s("Button",{staticStyle:{margin:"4px 2px"},attrs:{size:"small",type:"primary"},on:{click:t.delBuyGiftList}},[t._v(" 全部删除 ")]),s("Button",{attrs:{size:"small",type:"primary"},on:{click:function(s){return t.showModal("编辑","BuyGive")}}},[t._v(" 编辑 ")])],1)]),t._m(11),t._l(t.formData.buyGiftList,(function(a,e){return s("tr",{key:e},[s("td",[t._v(t._s(a.name))]),s("td",[t._v(t._s(a.num))]),s("td",[t._v(t._s(1===a.longTime.limit?"无限制":"有限制"))])])}))],2)])]),s("div",{staticClass:"row"},[t._m(12),s("div",{staticClass:"r"},[0===t.formData.renewGiftList.length?s("div",{staticClass:"bt",on:{click:function(s){return t.showModal("添加","RenewGive")}}},[t._v(" 添加 ")]):s("table",{staticStyle:{width:"100%"}},[s("tr",[s("td",{attrs:{colspan:"3"}},[s("Button",{staticStyle:{margin:"4px 2px"},attrs:{size:"small",type:"primary"},on:{click:t.delRenewGiveList}},[t._v(" 全部删除 ")]),s("Button",{attrs:{size:"small",type:"primary"},on:{click:function(s){return t.showModal("编辑","RenewGive")}}},[t._v(" 编辑 ")])],1)]),t._m(13),t._l(t.formData.renewGiftList,(function(a,e){return s("tr",{key:e},[s("td",[t._v(t._s(a.name))]),s("td",[t._v(t._s(a.num))]),s("td",[t._v(t._s(1===a.longTime.limit?"无限制":"有限制"))])])}))],2)])]),s("div",{staticClass:"row"},[s("div",{staticClass:"l"},[t._v("储值卡状态")]),s("div",{staticClass:"r"},[s("RadioGroup",[s("Radio",{attrs:{label:"是"}},[s("span",[t._v("上架")])]),s("Radio",{attrs:{label:"否"}},[s("span",[t._v("下架")])])],1)],1)]),t._m(14),s("div",{staticClass:"row"},[s("div",{staticClass:"l"},[t._v("限购")]),s("div",{staticClass:"r"},[s("RadioGroup",[s("Radio",{attrs:{label:"是"}},[s("span",[t._v("不限")])]),s("Radio",{attrs:{label:"否"}},[s("span",[t._v("限购")])])],1)],1)])])])]),s("div",{staticClass:"footer"},[s("div",{staticClass:"bt",on:{click:t.getEditorData}},[t._v("保存")])]),s("Modal",{attrs:{"footer-hide":!0,styles:t.modal.styles,title:t.modal.title,width:t.modal.width},model:{value:t.modal.show,callback:function(s){t.$set(t.modal,"show",s)},expression:"modal.show"}},[t.modalShow("RuleProducts")?s("RuleProducts",{attrs:{data:t.formData.ruleList,"shop-list":t.shopPriceList},on:{data:t.setRuleList}}):t._e(),t.modalShow("BuyGive")?s("GiveProducts",{attrs:{data:t.formData.buyGiftList},on:{data:t.setBuyGiftList}}):t._e(),t.modalShow("RenewGive")?s("GiveProducts",{attrs:{data:t.formData.renewGiftList},on:{data:t.setRenewGiftList}}):t._e()],1)],1)},Ls=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"header"},[s("span",{staticClass:"red"},[t._v("*")]),s("span",{staticStyle:{"font-weight":"bold"}},[t._v("基础信息")]),s("span",{staticClass:"notice"},[t._v("带*为必填项")])])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"l"},[s("span",{staticClass:"red"},[t._v("*")]),t._v(" 储值卡名称 ")])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"l"},[s("span",{staticClass:"red"},[t._v("*")]),t._v(" 适用门店 ")])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"l"},[s("span",{staticClass:"red"},[t._v("*")]),t._v(" 统一售价 ")])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"l"},[s("span",{staticClass:"red"},[t._v("*")]),t._v(" 储值卡面额 ")])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"l"},[s("span",{staticClass:"red"},[t._v("*")]),t._v(" 储值卡分类 ")])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"l"},[s("span",{staticClass:"red"},[t._v("*")]),t._v(" 储值卡规则 ")])},function(){var t=this,s=t._self._c;return s("tr",[s("td",[t._v("内容")]),s("td",[t._v("折扣金额")])])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"l"},[s("span",{staticClass:"red"},[t._v("*")]),t._v(" 开始时间 ")])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"l"},[s("span",{staticClass:"red"},[t._v("*")]),t._v(" 结束时间 ")])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"l"},[s("span",{staticClass:"red"},[t._v("*")]),t._v(" 购卡赠送 ")])},function(){var t=this,s=t._self._c;return s("tr",[s("td",[t._v("内容")]),s("td",[t._v("数量")]),s("td",[t._v("赠送时长")])])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"l"},[s("span",{staticClass:"red"},[t._v("*")]),t._v(" 续充赠送 ")])},function(){var t=this,s=t._self._c;return s("tr",[s("td",[t._v("内容")]),s("td",[t._v("数量")]),s("td",[t._v("赠送时长")])])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"row"},[s("div",{staticClass:"l"},[t._v("储值卡须知")]),s("div",{staticClass:"r"},[s("div",{attrs:{id:"editor"}})])])}],Ps=function(){var t=this,s=t._self._c;return s("div",{staticClass:"RuleProducts"},[s("div",{staticClass:"left"},[s("div",{staticClass:"title"},[t._v("设置使用规则")]),s("div",{staticClass:"search"},[s("div",{staticClass:"left"},[s("div",{staticClass:"box"},[s("div",{staticClass:"text"},[t._v("搜索：")]),s("Select",{ref:"selectbox",attrs:{clearable:"",filterable:"",loading:t.search.loading,placeholder:"请输入关键词","remote-method":t.remoteMethod,size:"small"},on:{"on-change":t.selectChange},model:{value:t.search.keyword,callback:function(s){t.$set(t.search,"keyword",s)},expression:"search.keyword"}},t._l(t.search.options,(function(t){return s("Option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)])]),s("div",{staticClass:"content"},[s("div",{staticClass:"l"},[s("my-tree",{attrs:{data:t.columns},on:{change:t.change,clear:t.clear,"end-check":t.endCheck}})],1),s("div",{staticClass:"r"},t._l(t.detailsList,(function(a,e){return s("div",{key:e},[s("Checkbox",{attrs:{disabled:a.disabled,"false-value":0,"true-value":1},on:{"on-change":function(s){return t.check(a)}},model:{value:a.checked,callback:function(s){t.$set(a,"checked",s)},expression:"item.checked"}},[t._v(" "+t._s(a.name)+" ")])],1)})),0)])]),s("div",{staticClass:"right"},[s("div",{staticClass:"title"},[t._v("已选内容")]),s("div",{staticClass:"content"},[s("div",{staticClass:"content-left"},[s("div",{staticClass:"list"},[s("table",{staticStyle:{width:"100%","text-align":"center",border:"1px solid #eeeeee"}},[t._m(0),t._l(t.list,(function(a,e){return s("tr",{key:e,class:[t.isActive(a)?"isActive":""],staticStyle:{height:"32px",cursor:"pointer"},on:{click:function(s){return t.currentRow(a,e)}}},[s("td",[t._v(t._s(a.name))]),s("td",[t._v(t._s(a.price))]),s("td",[s("span",{staticClass:"bt",on:{click:function(s){return s.stopPropagation(),t.delRow(e)}}},[t._v("删除")])])])}))],2)])]),s("div",{staticClass:"content-right"},[t.current?s("div",{staticClass:"list"},[s("table",{staticStyle:{width:"100%","text-align":"center",border:"1px solid #eeeeee"}},[s("tr",{staticStyle:{background:"#fdf1f6",height:"32px"}},[s("td",[t._v(t._s(t.current.name))]),s("td",[t._v(" 批量设置折扣： "),s("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"折扣在0-1之间",size:"small"},on:{"on-blur":t.batchDiscount},model:{value:t.discount,callback:function(s){t.discount=s},expression:"discount"}})],1),s("td",[t._v("操作")])]),t._l(t.list,(function(a,e){return[t.isExist(t.current,a)?t._l(a.shopList,(function(i,l){return s("tr",{key:`${e}_${l}`,staticStyle:{height:"32px"}},[s("td",[t._v(t._s(i.name))]),s("td",[s("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"折扣在0-1之间",size:"small"},on:{"on-blur":function(s){return t.setDiscount(i)}},model:{value:i.discount,callback:function(s){t.$set(i,"discount",s)},expression:"val.discount"}})],1),s("td",[s("span",{staticClass:"bt",on:{click:function(s){return s.stopPropagation(),t.delShop(a,e)}}},[t._v(" 删除 ")])])])})):t._e()]}))],2)]):t._e()])]),s("div",{staticStyle:{display:"flex","justify-content":"end",padding:"10px"}},[s("div",{staticClass:"add-bt",on:{click:t.save}},[t._v("保存")])])])])},$s=[function(){var t=this,s=t._self._c;return s("tr",{staticStyle:{background:"#fdf1f6",height:"32px"}},[s("td",[t._v("内容")]),s("td",[t._v("价格")]),s("td",[t._v("操作")])])}],zs=(a(21703),function(){var t=this,s=t._self._c;return t.flag?s("div",t._l(t.list,(function(a,e){return s("tree-item",{key:e,staticClass:"item",attrs:{data:a},on:{change:t.handChange}})})),1):t._e()}),Rs=[],Hs=function(){var t=this,s=t._self._c;return s("div",[s("li",[s("div",[s("Checkbox",{attrs:{disabled:t.item.disabled,"false-value":0,"true-value":1},on:{"on-change":function(s){return t.check(t.item)}},model:{value:t.item.checked,callback:function(s){t.$set(t.item,"checked",s)},expression:"item.checked"}}),s("span",{staticClass:"name",class:{bold:t.isFolder},on:{click:function(s){return t.toggle(t.item)}}},[t._v(" "+t._s(t.item.name)+" ")])],1),t.isFolder?s("ul",{directives:[{name:"show",rawName:"v-show",value:t.isOpen,expression:"isOpen"}]},t._l(t.item.children,(function(t,a){return s("tree-item",{key:a,staticClass:"item",attrs:{data:t}})})),1):t._e()])])},Is=[],Gs={name:"TreeItem",inject:["myTree"],props:{data:{type:Object,default:()=>({})}},data(){return{isOpen:!1,tree:null,isTree:!1,parent:Object,item:{}}},computed:{isFolder:function(){return this.item.children&&this.item.children.length},isExist(){return(t,s)=>t.type===s.type&&t.id===s.id}},beforeDestroy(){this.myTree.$off("check")},created(){this.item=this.data,this.myTree.$on("check",(t=>{this.isExist(this.item,t)&&(this.item.checked=t.checked,this.item.disabled=t.disabled,this.item.name=this.item.name+" ",this.item.name=this.Trim(this.item.name),this.check(this.item))}));const t=this.$parent;this.parent=t,t.isTree?this.tree=t:this.tree=t.tree},methods:{endCheck(t){t.children&&0!==t.children.length?this.tree.clear():this.tree.endCheck(t)},toggle(t){this.isFolder&&(this.isOpen=!this.isOpen),this.endCheck(t)},check(t){switch(t.checked){case 1:this.handleDisabled(t,!0);break;case 0:this.handleDisabled(t,!1);break}this.upChecked(this.parent,t),this.tree.handChange(t),this.endCheck(t)},upChecked(t,s){t.isTree||(1===s.checked||s.disabled?this.upSetDisabledTrue(t):this.upSetDisabledFalse(t))},upSetDisabledTrue(t){t.item&&(t.item.name=t.item.name+" ",t.item.disabled=!0,this.upSetDisabledTrue(t.$parent),t.item.name=this.Trim(t.item.name))},upSetDisabledFalse(t){if(t.item){let s=0,a=!0;t.item.children.forEach((t=>{1!==t.checked&&!0!==t.disabled||(a=!1),1!==t.checked&&!1!==t.disabled||s++})),a&&(t.item.children.length-s===0||t.item.children.length-s>1)&&(t.item.name=t.item.name+" ",t.item.disabled=!1,t.item.name=this.Trim(t.item.name),this.upSetDisabledFalse(t.$parent))}},handleDisabled(t,s){t.children.forEach((t=>{t.name=t.name+" ",t.disabled=s,this.handleDisabled(t,s),t.name=this.Trim(t.name)}))},Trim(t){return t.replace(/(^\s*)|(\s*$)/g,"")}}},Zs=Gs,Es=(0,f.Z)(Zs,Hs,Is,!1,null,"08a8cc9f",null),Fs=Es.exports,Ms={name:"MyTree",components:{TreeItem:Fs},props:{data:{type:Array,default:()=>[]}},data(){return{isTree:!0,list:[],flag:!1}},created(){this.isTree=!0,this.list=this.data,this.flag=!1,this.initData(this.list),this.flag=!0,console.log("list",this.list)},methods:{initData(t){t.forEach((t=>{t.disabled||(t.disabled=!1),t.menu=!0,t.checked=Number(t.checked),this.initData(t.children)}))},handChange(t){this.$emit("change",t)},endCheck(t){this.$emit("end-check",t)},clear(){this.$emit("clear",[])}}},Ns=Ms,Vs=(0,f.Z)(Ns,zs,Rs,!1,null,"0ba0f617",null),As=Vs.exports,Bs=a(36369),Os={name:"RuleProducts",components:{MyTree:As},provide(){return{myTree:this.myTree}},props:{data:{type:Array,default:()=>[]},shopList:{type:Array,default:()=>[]}},data:function(){return{myTree:new Bs["default"],columns:[{id:0,type:1,name:"全部商品",checked:0,price:0,children:[{id:1,type:1,name:"葡萄",checked:0,price:0,children:[{id:2,type:1,name:"葡萄1",checked:0,price:0,children:[{id:3,type:1,name:"葡萄221",checked:0,price:0,children:[]},{id:4,type:1,name:"葡萄21",checked:0,price:0,children:[]}]}]},{id:5,type:1,name:"苹果",checked:0,price:0,children:[{id:6,type:1,name:"苹果1",checked:0,price:0,children:[]}]}]}],list:[],detailsList:[],current:null,discount:"",index:"",search:{loading:!1,keyword:"",options:"",list:[]}}},computed:{isActive(){return t=>this.current&&this.current.name===t.name},isExist(){return(t,s)=>t.type===s.type&&t.id===s.id},isEnd(){return t=>!t.menu}},created(){this.initData()},methods:{currentRow(t,s){this.current=t,this.index=s,this.discount=""},initData(){setTimeout((()=>{this.list=this.data,this.list.forEach((t=>{this.setDisabled(t)}))}),1e3)},clear(t){this.detailsList=t},endCheck(t){let s=this.getData(t);1===t.checked?s.forEach((t=>{t.disabled=!0,t.checked=0,t.checked=Number(t.checked)})):s.forEach((t=>{t.disabled=!1,t.checked=0,t.checked=Number(t.checked)}));let a=!0;this.list.forEach((t=>{s.forEach((s=>{this.isExist(t,s)&&(s.checked=1,a=!1)}))})),t.disabled&&a&&s.forEach((t=>{t.disabled=!0})),this.detailsList=s},getData(t){return 3===t.id?[{id:222,type:1,name:"水果1"+t.name+"_id:"+t.id,checked:0,price:0,pid:t.id},{id:333,type:1,name:"水果2"+t.name+"_id:"+t.id,checked:0,price:0,pid:t.id}]:[{id:77,type:1,name:"水果1"+t.name+"_id:"+t.id,checked:0,price:0,pid:t.id},{id:55,type:1,name:"水果2"+t.name+"_id:"+t.id,checked:0,price:0,pid:t.id}]},change(t){switch(t.checked){case 1:this.addRow(t);break;case 0:this.del(t);break}},del(t){for(let s=0;s<this.list.length;s++)if(this.isExist(t,this.list[s])){this.delRow(s);break}},check(t){switch(t.checked){case 1:this.addRow(t);break;case 0:this.del(t);break}if(this.isEnd(t)){let s=!1;this.detailsList.forEach((t=>{1===t.checked&&(s=!0)})),t={id:t.pid,type:t.type,disabled:s,checked:0},this.myTree.$emit("check",t)}},getEndParent(t){let s=!1;return this.list.forEach((a=>{this.isEnd(a)&&t.pid===a.pid&&t.pid>0&&(s=!0)})),t={id:t.pid,type:t.type,disabled:s,checked:0},t},setDisabled(t,s){this.isEnd(t)?t=this.getEndParent(t):"del"===s?(t.checked=0,t.disabled=!1):t.checked=1,this.myTree.$emit("check",t)},addRow(t){let s=!0;for(let a=0;a<this.list.length;a++)if(this.isExist(t,this.list[a])){s=!1;break}if(s){let s=!!t.menu;this.list.push({id:t.id,name:t.name,price:t.price,type:t.type,menu:s,shopList:this.shopDiscount(),pid:s?-1:t.pid})}},shopDiscount(){let t=[];return this.shopList.forEach((s=>{t.push({id:s.id,name:s.name,discount:""})})),t},delRow(t){let s=this.list[t];this.list.splice(t,1),this.setDisabled(s,"del")},delShop(t,s){t.shopList.splice(s,1)},checkDiscount(t){return""!==t.toString().replace(/^(?!0\.(?!0{2})\d{1,2}$).+$/,"")},batchDiscount(){if(!this.checkDiscount(this.discount))return this.discount="",!1;this.list[this.index]&&this.list[this.index].shopList.forEach((t=>{t.discount=this.discount}))},setDiscount(t){this.checkDiscount(t.discount)||(t.discount="")},selectChange(t){t&&(t=JSON.parse(t),this.addRow(t),this.setDisabled(t),this.search.keyword="",this.$refs.selectbox.clearSingleSelect())},remoteMethod(t){""!==t?(this.search.loading=!0,this.search.list=this.getData({id:3}).map((t=>({value:`${JSON.stringify(t)}`,label:`${t.name}`}))),setTimeout((()=>{this.search.loading=!1,this.search.options=this.search.list}),200)):this.search.options=[]},save(){try{this.list.forEach((t=>{t.shopList.forEach((s=>{if(!s.discount)throw Error(`${t.name}:${s.name} 折扣未设置`)}))})),this.$emit("data",this.list)}catch(t){this.$Message.error(t.message)}}}},js=Os,Us=(0,f.Z)(js,Ps,$s,!1,null,"28e0d158",null),Ws=Us.exports,Js=function(){var t=this,s=t._self._c;return s("div",{staticClass:"GiveProducts"},[s("div",{staticClass:"left"},[s("div",{staticClass:"title"},[t._v("添加购卡赠送内容")]),t._m(0),s("div",{staticClass:"content"},[s("div",{staticClass:"l"},t._l(t.columns,(function(a,e){return s("div",{key:e},[s("Checkbox",{attrs:{"false-value":0,"true-value":1},on:{"on-change":function(s){return t.firstColumns(a)}},model:{value:a.value,callback:function(s){t.$set(a,"value",s)},expression:"item.value"}}),s("span",{staticClass:"name",class:t.current===a.type?"active":"",on:{click:function(s){return t.active(a)}}},[t._v(" "+t._s(a.name)+" ")])],1)})),0),s("div",{staticClass:"r"},t._l(t.columns,(function(a,e){return s("div",{key:e},[t.current===a.type?s("div",[a.children.length>0?s("div",t._l(a.children,(function(a,e){return s("div",{key:e},[s("Checkbox",{attrs:{"false-value":0,"true-value":1},on:{"on-change":function(s){return t.addRow(a)}},model:{value:a.value,callback:function(s){t.$set(a,"value",s)},expression:"child.value"}},[t._v(" "+t._s(a.name)+" ")])],1)})),0):s("div",[t._v("暂无数据")])]):t._e()])})),0)])]),s("div",{staticClass:"right"},[s("div",{staticClass:"title"},[t._v("已选内容")]),s("div",{staticClass:"list"},[s("table",{staticStyle:{width:"100%","text-align":"center",border:"1px solid #eeeeee"}},[t._m(1),t._l(t.list,(function(a,e){return s("tr",{key:e,staticStyle:{height:"32px"}},[s("td",[t._v(t._s(a.name))]),s("td",[t._v(t._s(a.price))]),s("td",[s("Input",{staticStyle:{width:"100px"},attrs:{placeholder:"请输入数量",size:"small"},model:{value:a.num,callback:function(s){t.$set(a,"num",s)},expression:"item.num"}}),t._v(" 张 ")],1),s("td",[s("div",{staticStyle:{padding:"10px"}},[s("Radio",{attrs:{label:"1"},model:{value:a.longTime.limit,callback:function(s){t.$set(a.longTime,"limit",s)},expression:"item.longTime.limit"}},[t._v("不限次")]),s("Radio",{attrs:{label:"2"},model:{value:a.longTime.limit,callback:function(s){t.$set(a.longTime,"limit",s)},expression:"item.longTime.limit"}},[t._v("固定时长")])],1),"2"===a.longTime.limit?s("div",[s("Input",{staticClass:"input-with-select",staticStyle:{width:"120px"},attrs:{placeholder:"请输入数字",size:"small"},model:{value:a.longTime.limitTime.number,callback:function(s){t.$set(a.longTime.limitTime,"number",s)},expression:"item.longTime.limitTime.number"}},[s("Select",{attrs:{slot:"append",placeholder:"请选择"},slot:"append",model:{value:a.longTime.limitTime.timeType,callback:function(s){t.$set(a.longTime.limitTime,"timeType",s)},expression:"item.longTime.limitTime.timeType"}},[s("Option",{attrs:{label:"年",value:"year"}}),s("Option",{attrs:{label:"月",value:"month"}}),s("Option",{attrs:{label:"日",value:"day"}})],1)],1)],1):t._e()]),s("td",[s("span",{staticClass:"bt",on:{click:function(s){return t.delRow(e)}}},[t._v("删除")])])])}))],2),s("div",{staticStyle:{display:"flex","justify-content":"end",padding:"10px"}},[s("td",{attrs:{colspan:"2"}},[s("div",{staticClass:"add-bt",on:{click:t.save}},[t._v("保存")])])])])])])},qs=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"search"},[s("div",{staticClass:"left"},[s("div",{staticClass:"box"},[s("div",{staticClass:"text"},[t._v("搜索：")])])])])},function(){var t=this,s=t._self._c;return s("tr",{staticStyle:{background:"#fdf1f6",height:"32px"}},[s("td",[t._v("内容")]),s("td",[t._v("价格")]),s("td",[t._v("赠送数量")]),s("td",[t._v("赠送时长")]),s("td",[t._v("操作")])])}],Ks=(a(26699),{name:"GiveProducts",props:{data:{type:Array,default:()=>[]}},data:function(){return{current:0,columns:[{name:"全部项目",value:0,type:1,children:[]},{name:"全部商品",value:0,type:2,children:[]},{name:"全部套餐次卡",value:0,type:3,children:[]}],list:[],options:[]}},created(){this.columns.forEach(((t,s)=>{this.getData(t,s)})),this.initData(),this.searchData()},methods:{initData(){this.current=0,this.data.length>0&&(this.columns.forEach((t=>{let s=0;t.children.forEach((t=>{this.data.forEach((a=>{a.id===t.id&&a.type===t.type&&(t.value=1,s++,0===this.current&&(this.current=a.type))}))})),t.children.length>0&&t.children.length===s&&(t.value=1)})),this.list=this.data)},searchData(){let t=[];this.columns.forEach((s=>{let a=[];s.children.forEach((t=>{a.push({label:t.name,value:t})})),t.push({label:s.name,value:s,children:a})})),console.log(t,"options"),this.options=t},search(t){t.length>0&&this.add(t[t.length-1])},delRow(t){let s=this.list[t];this.columns[s.type-1].value=0,this.columns[s.type-1].children.forEach((t=>{s.id===t.id&&s.type===t.type&&(t.value=0)})),this.list.splice(t,1)},addRow(t){switch(t.value){case 1:this.add(t);break;case 0:this.del(t);break}},del(t){for(let s=0;s<this.list.length;s++)if(this.list[s].type===t.type&&this.list[s].id===t.id){this.delRow(s);break}},add(t){let s=!0,a=0;this.list.forEach((e=>{t.id===e.id&&t.type===e.type&&(s=!1),t.type===e.type&&a++})),s&&this.list.push({id:t.id,name:t.name,price:t.price,num:1,type:t.type,longTime:{limit:"1",limitTime:{number:1,timeType:"year"}}}),this.columns[t.type-1].children.length===a+1&&(this.columns[t.type-1].value=1),console.log("this.list",this.list)},addAll(t){t.children.forEach((t=>{this.add(t)}))},delAll(t){let s=t.children.map((t=>t.id));this.list=this.list.filter((a=>{if(a.type!==t.type||!s.includes(a.id))return a;console.log("item",a)}))},active(t){this.current=t.type},getData(t,s){switch(t.type){case 1:this.getProjectList(t,s);break;case 2:this.getGoodsList(t,s);break}},firstColumns(t){switch(console.log(t),this.current=t.type,t.value){case 1:this.checkAll(t);break;case 0:this.checkCancel(t);break}},checkAll(t){t.children.forEach((t=>{t.value=1})),this.addAll(t)},checkCancel(t){t.children.forEach((t=>{t.value=0})),this.delAll(t)},child(t,s){return t.forEach((t=>{t.value=0,t.type=s})),t},getProjectList(t,s){let a=[];a=[{id:1,name:"腹直肌修复",price:"10"},{id:2,name:"腹直肌修复22",price:"10"}],t.children=this.child(a,t.type),this.columns[s]=t},getGoodsList(t,s){let a=[];a=[{id:1,name:"苹果",price:"6"},{id:2,name:"苹果11",price:"6"}],t.children=this.child(a,t.type),this.columns[s]=t},save(){console.log("list",this.list),this.$emit("data",this.list)}}}),Qs=Ks,Xs=(0,f.Z)(Qs,Js,qs,!1,null,"b03827c6",null),Ys=Xs.exports,ta={name:"ValueCard",components:{GiveProducts:Ys,RuleProducts:Ws,SelectShop:p.Z,SelectProductType:v.Z},data:function(){return{modal:{show:!1,title:"",type:!1,width:800,styles:{top:"50px"}},defaultList:[],editor:null,editorData:"",shopList:[{id:"1",name:"惠城总店"},{id:"2",name:"武汉分店1"},{id:"3",name:"武汉分店2"},{id:"4",name:"武汉分店3"},{id:"5",name:"武汉分店4"}],shopPriceList:[{id:"1",name:"惠城总店"},{id:"2",name:"武汉分店1"}],valueTypeList:[],formData:{name:"",sids:[],prices:{total:"",shopList:[]},money:"",valueTypeId:"",ruleList:[],buyGiftList:[],renewGiftList:[],sort:"",info:"",status:"",limit:""},dropdown:{show:!1,title:"展开"}}},computed:{modalShow(){return t=>this.modal.type===t&&this.modal.show}},mounted(){const t=new(d())("#editor");t.config.onchange=t=>{this.editorData=t,this.$emit("editorContent",t)},t.create(),this.editor=t},methods:{showModal(t,s,a={}){switch(console.log(a),s){case"RuleProducts":this.modal.width=window.innerWidth-300;break;default:this.modal.width=80}this.modal.show=!0,this.modal.title=t,this.modal.type=s},show(t){"ivu-icon ivu-icon-md-arrow-dropright"===t.currentTarget.children[0].className?(t.currentTarget.children[0].className="ivu-icon ivu-icon-md-arrow-dropdown",this.dropdown.title="收起",this.dropdown.show=!0):(t.currentTarget.children[0].className="ivu-icon ivu-icon-md-arrow-dropright",this.dropdown.title="展开",this.dropdown.show=!1)},getEditorData(){let t=this.editor.txt.html();alert(t)},beforeDestroy(){this.editor.destroy(),this.editor=null},removeFile(t){console.log(t,"removeFile"),this.formData.img_id=""},uploadFile(t){this.formData.img_id=t.id,console.log(t,"uploadFile")},brand(){},unit(){},productType(){},delRuleList(){this.formData.ruleList=[]},setRuleList(t){this.formData.ruleList=t,this.modal.show=!1},delBuyGiftList(){this.formData.buyGiftList=[]},setBuyGiftList(t){this.formData.buyGiftList=t,this.modal.show=!1},delRenewGiveList(){this.formData.renewGiftList=[]},setRenewGiftList(t){this.formData.renewGiftList=t,this.modal.show=!1},showRuleProducts(){if(this.shopPriceList.length<=0)return this.$Message.error("请选择设用门店"),!1;this.showModal("设置本张储值卡金额","RuleProducts")}}},sa=ta,aa=(0,f.Z)(sa,Ts,Ls,!1,null,"406fa75b",null),ea=aa.exports,ia={name:"ValueCardList",components:{SelectGoodsStatus:ws,SelectProductType:v.Z,SelectShop:p.Z,ValueCard:ea},data:function(){return{loading:!1,tableHeight:0,tableData:[{0:"测试测试"}],tableColumns:[{title:"储值卡分类",key:"0",width:"200px"},{title:"储值卡名称",key:"2"},{title:"储值卡售价",key:"3"},{title:"储值卡状态",key:"4"}],searchData:{sid:"",goods_type_id:"",status:"",search:"",start_time:"",end_time:"",p:1,page:10,count:0},date:[],modal:{show:!1,title:"",type:!1,width:1e3,scrollable:!0,styles:{top:"50px"}}}},computed:{modalShow(){return t=>this.modal.type===t&&this.modal.show}},activated(){},created(){},mounted(){this.setHeight(),window.onresize=()=>{this.setHeight()}},methods:{setHeight(){this.tableHeight=window.innerHeight-264},clearDate(){this.searchData.start="",this.searchData.end=""},currentPage(t){this.searchData.p=t,this.getList()},pageSizeChange(t){this.searchData.page=t,this.search()},search(){this.searchData.p=1,this.getList()},showModal(t,s,a){console.log(a),this.modal.show=!0,this.modal.title=t,this.modal.type=s,this.modal.width=window.innerWidth-300},exportDataEvent(){setTimeout((()=>{const t=[];this.$refs.xTable.exportData({filename:"",type:"csv",isHeader:!0,isFooter:!0,data:t})}),100)}}},la=ia,oa=(0,f.Z)(la,Ss,ks,!1,null,"d416007c",null),ra=oa.exports,ca=function(){var t=this,s=t._self._c;return s("div",{staticClass:"DiscountCardList"},[s("div",{staticClass:"search"},[s("div",{staticClass:"left"},[s("div",{staticClass:"box"},[s("Input",{staticStyle:{width:"250px"},attrs:{clearable:"","enter-button":"",placeholder:"输入分类名称/折扣卡名称",search:""},on:{"on-clear":t.search,"on-search":t.search}})],1),s("div",{staticClass:"box"},[s("span",{staticClass:"text"},[t._v("折扣卡分类")]),s("SelectProductType",{on:{"on-select":t.search},model:{value:t.searchData.goods_type_id,callback:function(s){t.$set(t.searchData,"goods_type_id",s)},expression:"searchData.goods_type_id"}})],1),s("div",{staticClass:"box"},[s("span",{staticClass:"text"},[t._v("适用门店")]),s("SelectShop",{on:{"on-select":t.search},model:{value:t.searchData.sid,callback:function(s){t.$set(t.searchData,"sid",s)},expression:"searchData.sid"}})],1),s("div",{staticClass:"box"},[s("span",{staticClass:"text"},[t._v("适用会员等级")]),s("SelectGoodsStatus",{on:{"on-select":t.search},model:{value:t.searchData.status,callback:function(s){t.$set(t.searchData,"status",s)},expression:"searchData.status"}})],1),s("div",{staticClass:"box"},[s("span",{staticClass:"text"},[t._v("状态")]),s("SelectGoodsStatus",{on:{"on-select":t.search},model:{value:t.searchData.status,callback:function(s){t.$set(t.searchData,"status",s)},expression:"searchData.status"}})],1)]),s("div",{staticClass:"right"},[s("div",{staticClass:"add-bt",on:{click:function(s){return t.showModal("新增折扣卡","DiscountCard")}}},[t._v(" 新增折扣卡 ")])])]),s("div",{staticClass:"list"},[s("vxe-table",{ref:"xTable",attrs:{"cell-style":{textAlign:"center"},"column-config":{resizable:!0},data:t.tableData,"header-align":"center",height:t.tableHeight,loading:t.loading,"row-config":{isHover:!0},size:"small"}},[t._l(t.tableColumns,(function(t,a){return s("vxe-column",{key:a+t.key,attrs:{field:t.key,fixed:t.fixed,"min-width":t.width,"show-overflow":"title",title:t.title}})})),s("vxe-column",{attrs:{title:"操作",width:"120"}},[[s("span",{staticClass:"bt"},[t._v("编辑")]),s("span",{staticClass:"bt"},[t._v("下架")])]],2)],2),s("div",{staticClass:"page"},[s("Page",{attrs:{current:t.searchData.p,"page-size":t.searchData.page,"show-elevator":"","show-sizer":"",size:"small",total:t.searchData.count,transfer:""},on:{"on-change":t.currentPage,"on-page-size-change":t.pageSizeChange}})],1)],1),s("Modal",{attrs:{"footer-hide":!0,scrollable:t.modal.scrollable,styles:t.modal.styles,title:t.modal.title,width:t.modal.width},model:{value:t.modal.show,callback:function(s){t.$set(t.modal,"show",s)},expression:"modal.show"}},[t.modalShow("DiscountCard")?s("DiscountCard"):t._e()],1)],1)},na=[],da=function(){var t=this,s=t._self._c;return s("div",{staticClass:"DiscountCard"},[s("div",{staticClass:"box"},[s("div",{staticClass:"left"},[t._m(0),s("div",{staticClass:"form"},[s("div",{staticClass:"row"},[t._m(1),s("div",{staticClass:"r"},[s("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入折扣卡名称"}})],1)]),s("div",{staticClass:"row"},[t._m(2),s("div",{staticClass:"r"},[s("SelectShop")],1)]),s("div",{staticClass:"row"},[t._m(3),s("div",{staticClass:"r"},[s("Input",{staticStyle:{width:"200px",padding:"0 2px"},attrs:{placeholder:"请输入金额"}}),s("span",{staticStyle:{color:"#f19ec2",cursor:"pointer"},on:{click:function(s){return t.show(s)}}},[t._v(" "+t._s(t.dropdown.title)+" "),s("Icon",{attrs:{size:16,type:"md-arrow-dropright"}})],1),t.dropdown.show?s("div",{staticClass:"dropdown"},[s("div",{staticClass:"row"},[s("div",{staticClass:"dropdown-l"},[t._v("武汉总店")]),s("div",{staticClass:"dropdown-r"},[s("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入金额"}},[s("span",{attrs:{slot:"append"},slot:"append"},[t._v("￥")])])],1)]),s("div",{staticClass:"row"},[s("div",{staticClass:"dropdown-l"},[t._v("惠城总店")]),s("div",{staticClass:"dropdown-r"},[s("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入金额"}},[s("span",{attrs:{slot:"append"},slot:"append"},[t._v("￥")])])],1)])]):t._e()],1)]),s("div",{staticClass:"row"},[t._m(4),s("div",{staticClass:"r"},[s("SelectProductType",{on:{"on-select":t.productType},model:{value:t.formData.goods_type_id,callback:function(s){t.$set(t.formData,"goods_type_id",s)},expression:"formData.goods_type_id"}})],1)]),t._m(5),s("div",{staticClass:"row"},[t._m(6),s("div",{staticClass:"r"},[s("RadioGroup",[s("Radio",{attrs:{label:"1"}},[s("span",[t._v("购买时间")])]),s("Radio",{attrs:{label:"2"}},[s("span",[t._v("首次使用时间")])]),s("Radio",{attrs:{label:"3"}},[s("span",[t._v("指定日期")])])],1)],1)]),s("div",{staticClass:"row"},[t._m(7),s("div",{staticClass:"r"},[s("RadioGroup",[s("Radio",{attrs:{label:"1"}},[s("span",[t._v("不限时长")])]),s("Radio",{attrs:{label:"2"}},[s("span",[t._v("固定时长")])]),s("Radio",{attrs:{label:"3"}},[s("span",[t._v("指定日期")])])],1)],1)]),s("div",{staticClass:"row"},[t._m(8),s("div",{staticClass:"r"},[s("RadioGroup",[s("Radio",{attrs:{label:"1"}},[s("span",[t._v("全部")])]),s("Radio",{attrs:{label:"2"}},[s("span",[t._v("指定会员等级")])])],1)],1)])])]),s("div",{staticClass:"right"},[s("div",{staticClass:"header"},[s("span",{staticClass:"title"},[t._v("其他信息")]),s("Poptip",{attrs:{placement:"left-start",transfer:"",trigger:"hover"}},[s("div",{staticClass:"explain"},[t._v("?字段说明")]),s("div",{attrs:{slot:"content"},slot:"content"},[s("div",{staticClass:"fields-remark"},[s("p",{staticClass:"text"},[s("span",{staticStyle:{"font-weight":"bold"}},[t._v("暂无：")])])])])])],1),s("div",{staticClass:"form"},[t._m(9),s("div",{staticClass:"row"},[s("div",{staticClass:"l"},[t._v("折扣卡状态")]),s("div",{staticClass:"r"},[s("RadioGroup",[s("Radio",{attrs:{label:"1"}},[s("span",[t._v("上架")])]),s("Radio",{attrs:{label:"2"}},[s("span",[t._v("下架")])])],1)],1)]),s("div",{staticClass:"row"},[s("div",{staticClass:"l"},[t._v("折扣卡须知")]),s("div",{staticClass:"r"},[s("Input",{attrs:{placeholder:"折扣卡须知",type:"textarea"}})],1)]),s("div",{staticClass:"row"},[s("div",{staticClass:"l"},[t._v("限购")]),s("div",{staticClass:"r"},[s("RadioGroup",[s("Radio",{attrs:{label:"是"}},[s("span",[t._v("不限")])]),s("Radio",{attrs:{label:"否"}},[s("span",[t._v("限购")])])],1)],1)])])])]),s("div",{staticClass:"footer"},[s("div",{staticClass:"bt",on:{click:t.getEditorData}},[t._v("保存")])])])},ha=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"header"},[s("span",{staticClass:"red"},[t._v("*")]),s("span",{staticStyle:{"font-weight":"bold"}},[t._v("基础信息")]),s("span",{staticClass:"notice"},[t._v("带*为必填项")])])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"l"},[s("span",{staticClass:"red"},[t._v("*")]),t._v(" 折扣卡名称 ")])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"l"},[s("span",{staticClass:"red"},[t._v("*")]),t._v(" 适用门店 ")])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"l"},[s("span",{staticClass:"red"},[t._v("*")]),t._v(" 统一售价 ")])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"l"},[s("span",{staticClass:"red"},[t._v("*")]),t._v(" 折扣卡分类 ")])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"row"},[s("div",{staticClass:"l"},[s("span",{staticClass:"red"},[t._v("*")]),t._v(" 折扣卡规则 ")]),s("div",{staticClass:"r"},[s("div",{staticClass:"bt"},[t._v("设置本张折扣卡的使用规则")])])])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"l"},[s("span",{staticClass:"red"},[t._v("*")]),t._v(" 开始时间 ")])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"l"},[s("span",{staticClass:"red"},[t._v("*")]),t._v(" 结束时间 ")])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"l"},[s("span",{staticClass:"red"},[t._v("*")]),t._v(" 指定使用对象 ")])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"row"},[s("div",{staticClass:"l"},[s("span",{staticClass:"red"},[t._v("*")]),t._v(" 购卡赠送 ")]),s("div",{staticClass:"r"},[s("div",{staticClass:"bt"},[t._v("添加")])])])}],va={name:"DiscountCard",components:{SelectShop:p.Z,SelectProductType:v.Z},data:function(){return{defaultList:[],editor:null,editorData:"",formData:{brand:"",unit:"",goods_type_id:"",img_id:""},dropdown:{show:!1,title:"展开"}}},mounted(){},methods:{show(t){"ivu-icon ivu-icon-md-arrow-dropright"===t.currentTarget.children[0].className?(t.currentTarget.children[0].className="ivu-icon ivu-icon-md-arrow-dropdown",this.dropdown.title="收起",this.dropdown.show=!0):(t.currentTarget.children[0].className="ivu-icon ivu-icon-md-arrow-dropright",this.dropdown.title="展开",this.dropdown.show=!1)},getEditorData(){let t=this.editor.txt.html();alert(t)},beforeDestroy(){this.editor.destroy(),this.editor=null},removeFile(t){console.log(t,"removeFile"),this.formData.img_id=""},uploadFile(t){this.formData.img_id=t.id,console.log(t,"uploadFile")},brand(){},unit(){},productType(){}}},pa=va,ua=(0,f.Z)(pa,da,ha,!1,null,"f103b1ee",null),ma=ua.exports,_a={name:"DiscountCardList",components:{SelectGoodsStatus:ws,SelectProductType:v.Z,SelectShop:p.Z,DiscountCard:ma},data:function(){return{loading:!1,tableHeight:0,tableData:[{0:"测试测试"}],tableColumns:[{title:"折扣卡分类",key:"0",width:"200px"},{title:"折扣卡名称",key:"2"},{title:"折扣卡售价",key:"3"},{title:"折扣卡状态",key:"4"}],searchData:{sid:"",goods_type_id:"",status:"",search:"",start_time:"",end_time:"",p:1,page:10,count:0},date:[],modal:{show:!1,title:"",type:!1,width:1e3,scrollable:!0,styles:{top:"50px"}}}},computed:{modalShow(){return t=>this.modal.type===t&&this.modal.show}},activated(){},created(){},mounted(){this.setHeight(),window.onresize=()=>{this.setHeight()}},methods:{setHeight(){this.tableHeight=window.innerHeight-264},clearDate(){this.searchData.start="",this.searchData.end=""},currentPage(t){this.searchData.p=t,this.getList()},pageSizeChange(t){this.searchData.page=t,this.search()},search(){this.searchData.p=1,this.getList()},showModal(t,s,a){console.log(a),this.modal.show=!0,this.modal.title=t,this.modal.type=s,this.modal.width=window.innerWidth-300},exportDataEvent(){setTimeout((()=>{const t=[];this.$refs.xTable.exportData({filename:"",type:"csv",isHeader:!0,isFooter:!0,data:t})}),100)}}},fa=_a,Ca=(0,f.Z)(fa,ca,na,!1,null,"cb00e32a",null),ga=Ca.exports,wa=function(){var t=this,s=t._self._c;return s("div",{staticClass:"CouponList"},[s("div",{staticClass:"search"},[s("div",{staticClass:"left"},[s("div",{staticClass:"box"},[s("Input",{staticStyle:{width:"250px"},attrs:{clearable:"","enter-button":"",placeholder:"输入分类名称/券名称",search:""},on:{"on-clear":t.search,"on-search":t.search}})],1),s("div",{staticClass:"box"},[s("span",{staticClass:"text"},[t._v("券分类")]),s("SelectProductType",{on:{"on-select":t.search},model:{value:t.searchData.goods_type_id,callback:function(s){t.$set(t.searchData,"goods_type_id",s)},expression:"searchData.goods_type_id"}})],1),s("div",{staticClass:"box"},[s("span",{staticClass:"text"},[t._v("适用门店")]),s("SelectShop",{on:{"on-select":t.search},model:{value:t.searchData.sid,callback:function(s){t.$set(t.searchData,"sid",s)},expression:"searchData.sid"}})],1),s("div",{staticClass:"box"},[s("span",{staticClass:"text"},[t._v("状态")]),s("SelectGoodsStatus",{on:{"on-select":t.search},model:{value:t.searchData.status,callback:function(s){t.$set(t.searchData,"status",s)},expression:"searchData.status"}})],1),s("div",{staticClass:"box"},[s("span",{staticClass:"text"},[t._v("券类型")]),s("SelectGoodsStatus",{on:{"on-select":t.search},model:{value:t.searchData.status,callback:function(s){t.$set(t.searchData,"status",s)},expression:"searchData.status"}})],1)]),s("div",{staticClass:"right"},[s("div",{staticClass:"add-bt",on:{click:function(s){return t.showModal("新增券","Coupon")}}},[t._v("新增券")])])]),s("div",{staticClass:"list"},[s("vxe-table",{ref:"xTable",attrs:{"cell-style":{textAlign:"center"},"column-config":{resizable:!0},data:t.tableData,"header-align":"center",height:t.tableHeight,loading:t.loading,"row-config":{isHover:!0},size:"small"}},[t._l(t.tableColumns,(function(t,a){return s("vxe-column",{key:a+t.key,attrs:{field:t.key,fixed:t.fixed,"min-width":t.width,"show-overflow":"title",title:t.title}})})),s("vxe-column",{attrs:{title:"操作",width:"120"}},[[s("span",{staticClass:"bt"},[t._v("编辑")]),s("span",{staticClass:"bt"},[t._v("下架")])]],2)],2),s("div",{staticClass:"page"},[s("Page",{attrs:{current:t.searchData.p,"page-size":t.searchData.page,"show-elevator":"","show-sizer":"",size:"small",total:t.searchData.count,transfer:""},on:{"on-change":t.currentPage,"on-page-size-change":t.pageSizeChange}})],1)],1),s("Modal",{attrs:{"footer-hide":!0,scrollable:t.modal.scrollable,styles:t.modal.styles,title:t.modal.title,width:t.modal.width},model:{value:t.modal.show,callback:function(s){t.$set(t.modal,"show",s)},expression:"modal.show"}},[t.modalShow("Coupon")?s("Coupon"):t._e()],1)],1)},ba=[],ya=function(){var t=this,s=t._self._c;return s("div",{staticClass:"coupon"},[s("div",{staticClass:"box"},[s("div",{staticClass:"left"},[t._m(0),s("div",{staticClass:"form"},[s("div",{staticClass:"row"},[t._m(1),s("div",{staticClass:"r"},[s("RadioGroup",[s("Radio",{attrs:{label:"1"}},[s("span",[t._v("现金券")])]),s("Radio",{attrs:{label:"2"}},[s("span",[t._v("折扣券")])])],1)],1)]),s("div",{staticClass:"row"},[t._m(2),s("div",{staticClass:"r"},[s("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入券名称"}})],1)]),s("div",{staticClass:"row"},[t._m(3),s("div",{staticClass:"r"},[s("SelectShop")],1)]),s("div",{staticClass:"row"},[t._m(4),s("div",{staticClass:"r"},[s("Input",{staticStyle:{width:"200px",padding:"0 2px"},attrs:{placeholder:"请输入金额"}}),s("span",{staticStyle:{color:"#f19ec2",cursor:"pointer"},on:{click:function(s){return t.show(s)}}},[t._v(" "+t._s(t.dropdown.title)+" "),s("Icon",{attrs:{size:16,type:"md-arrow-dropright"}})],1),t.dropdown.show?s("div",{staticClass:"dropdown"},[s("div",{staticClass:"row"},[s("div",{staticClass:"dropdown-l"},[t._v("武汉总店")]),s("div",{staticClass:"dropdown-r"},[s("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入金额"}},[s("span",{attrs:{slot:"append"},slot:"append"},[t._v("￥")])])],1)]),s("div",{staticClass:"row"},[s("div",{staticClass:"dropdown-l"},[t._v("惠城总店")]),s("div",{staticClass:"dropdown-r"},[s("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入金额"}},[s("span",{attrs:{slot:"append"},slot:"append"},[t._v("￥")])])],1)])]):t._e()],1)]),s("div",{staticClass:"row"},[t._m(5),s("div",{staticClass:"r"},[s("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入券面额"}})],1)]),s("div",{staticClass:"row"},[t._m(6),s("div",{staticClass:"r"},[s("SelectProductType",{on:{"on-select":t.productType},model:{value:t.formData.goods_type_id,callback:function(s){t.$set(t.formData,"goods_type_id",s)},expression:"formData.goods_type_id"}})],1)]),t._m(7),s("div",{staticClass:"row"},[t._m(8),s("div",{staticClass:"r"},[s("RadioGroup",[s("Radio",{attrs:{label:"1"}},[s("span",[t._v("购买时间")])]),s("Radio",{attrs:{label:"2"}},[s("span",[t._v("首次使用时间")])]),s("Radio",{attrs:{label:"3"}},[s("span",[t._v("指定日期")])])],1)],1)]),s("div",{staticClass:"row"},[t._m(9),s("div",{staticClass:"r"},[s("RadioGroup",[s("Radio",{attrs:{label:"1"}},[s("span",[t._v("不限时长")])]),s("Radio",{attrs:{label:"2"}},[s("span",[t._v("固定时长")])]),s("Radio",{attrs:{label:"3"}},[s("span",[t._v("指定日期")])])],1)],1)])])]),s("div",{staticClass:"right"},[s("div",{staticClass:"header"},[s("span",{staticClass:"title"},[t._v("其他信息")]),s("Poptip",{attrs:{placement:"left-start",transfer:"",trigger:"hover"}},[s("div",{staticClass:"explain"},[t._v("?字段说明")]),s("div",{attrs:{slot:"content"},slot:"content"},[s("div",{staticClass:"fields-remark"},[s("p",{staticClass:"text"},[s("span",{staticStyle:{"font-weight":"bold"}},[t._v("券类型:")]),t._v(" 现金券是指现金抵扣券,折扣券是指享受折扣的券。 ")]),s("p",{staticClass:"text"},[s("span",{staticStyle:{"font-weight":"bold"}},[t._v("券名称:")]),t._v(" 券名称不要超过50个字。 ")]),s("p",{staticClass:"text"},[s("span",{staticStyle:{"font-weight":"bold"}},[t._v("适用门店:")]),t._v(" 设置哪些门店可以经营该券。 ")]),s("p",{staticClass:"text"},[s("span",{staticStyle:{"font-weight":"bold"}},[t._v("统一售价:：")]),t._v(" 若存在不同门店不同的定价,请展开按门店设置价格。 ")]),s("p",{staticClass:"text"},[s("span",{staticStyle:{"font-weight":"bold"}},[t._v("券面额:")]),t._v(" 指当前券可用金额。 ")]),s("p",{staticClass:"text"},[s("span",{staticStyle:{"font-weight":"bold"}},[t._v("券分类：")]),t._v(" (推荐完善)方便收银和设置卡的时候快速筛选。 ")]),s("p",{staticClass:"text"},[s("span",{staticStyle:{"font-weight":"bold"}},[t._v("使用范围:")]),t._v(" 设置该券适用的各品项内容,收银时选择对应品项内容可使用对应的券支付。 ")]),s("p",{staticClass:"text"},[s("span",{staticStyle:{"font-weight":"bold"}},[t._v("开始时间:")]),t._v(" 指该券生效日期,如果需要规定生效时间,请选择指定日期,可输入日期哦。 ")]),s("p",{staticClass:"text"},[s("span",{staticStyle:{"font-weight":"bold"}},[t._v("结束时间:")]),t._v(" 指该券失效日期,如果需要规定失效时间,请选择指定日期,可输入日期哦。 ")]),s("p",{staticClass:"text"},[s("span",{staticStyle:{"font-weight":"bold"}},[t._v("券状态:")]),t._v(" 上架:可以在系统中售卖该券下架:不可在系统中售卖该券 ")]),s("p",{staticClass:"text"},[s("span",{staticStyle:{"font-weight":"bold"}},[t._v("售卖:")]),t._v(" 指可售卖。 ")]),s("p",{staticClass:"text"},[s("span",{staticStyle:{"font-weight":"bold"}},[t._v("赠送:")]),t._v(" 指该券可赠送,不选时该券不会在赠送列表出现。 ")])])])])],1),s("div",{staticClass:"form"},[s("div",{staticClass:"row"},[s("div",{staticClass:"l"},[t._v("券状态")]),s("div",{staticClass:"r"},[s("RadioGroup",[s("Radio",{attrs:{label:"是"}},[s("span",[t._v("上架")])]),s("Radio",{attrs:{label:"否"}},[s("span",[t._v("下架")])])],1)],1)]),s("div",{staticClass:"row"},[s("div",{staticClass:"l"},[t._v("订单使用限制")]),s("div",{staticClass:"r"},[s("RadioGroup",[s("Radio",{attrs:{label:"是"}},[s("span",[t._v("1次")])]),s("Radio",{attrs:{label:"否"}},[s("span",[t._v("不限制")])])],1)],1)]),s("div",{staticClass:"row"},[s("div",{staticClass:"l"},[t._v("相互赠送")]),s("div",{staticClass:"r"},[s("RadioGroup",[s("Radio",{attrs:{label:"是"}},[s("span",[t._v("允许")])]),s("Radio",{attrs:{label:"否"}},[s("span",[t._v("不允许")])])],1)],1)]),s("div",{staticClass:"row"},[s("div",{staticClass:"l"},[t._v("券须知")]),s("div",{staticClass:"r"},[s("Input",{attrs:{placeholder:"券须知",type:"textarea"}})],1)])])])]),s("div",{staticClass:"footer"},[s("div",{staticClass:"bt",on:{click:t.getEditorData}},[t._v("保存")])])])},xa=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"header"},[s("span",{staticClass:"red"},[t._v("*")]),s("span",{staticStyle:{"font-weight":"bold"}},[t._v("基础信息")]),s("span",{staticClass:"notice"},[t._v("带*为必填项")])])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"l"},[s("span",{staticClass:"red"},[t._v("*")]),t._v(" 请选择券类型 ")])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"l"},[s("span",{staticClass:"red"},[t._v("*")]),t._v(" 券名称 ")])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"l"},[s("span",{staticClass:"red"},[t._v("*")]),t._v(" 适用门店 ")])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"l"},[s("span",{staticClass:"red"},[t._v("*")]),t._v(" 统一售价 ")])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"l"},[s("span",{staticClass:"red"},[t._v("*")]),t._v(" 券面额 ")])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"l"},[s("span",{staticClass:"red"},[t._v("*")]),t._v(" 券分类 ")])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"row"},[s("div",{staticClass:"l"},[s("span",{staticClass:"red"},[t._v("*")]),t._v(" 券规则 ")]),s("div",{staticClass:"r"},[s("div",{staticClass:"bt"},[t._v("设置本张券的使用规则")])])])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"l"},[s("span",{staticClass:"red"},[t._v("*")]),t._v(" 开始时间 ")])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"l"},[s("span",{staticClass:"red"},[t._v("*")]),t._v(" 结束时间 ")])}],Da={name:"Coupon",components:{SelectShop:p.Z,SelectProductType:v.Z},data:function(){return{defaultList:[],editor:null,editorData:"",formData:{brand:"",unit:"",goods_type_id:"",img_id:""},dropdown:{show:!1,title:"展开"}}},mounted(){},methods:{show(t){"ivu-icon ivu-icon-md-arrow-dropright"===t.currentTarget.children[0].className?(t.currentTarget.children[0].className="ivu-icon ivu-icon-md-arrow-dropdown",this.dropdown.title="收起",this.dropdown.show=!0):(t.currentTarget.children[0].className="ivu-icon ivu-icon-md-arrow-dropright",this.dropdown.title="展开",this.dropdown.show=!1)},getEditorData(){let t=this.editor.txt.html();alert(t)},beforeDestroy(){this.editor.destroy(),this.editor=null},removeFile(t){console.log(t,"removeFile"),this.formData.img_id=""},uploadFile(t){this.formData.img_id=t.id,console.log(t,"uploadFile")},brand(){},unit(){},productType(){}}},Sa=Da,ka=(0,f.Z)(Sa,ya,xa,!1,null,"083f5284",null),Ta=ka.exports,La={name:"CouponList",components:{SelectGoodsStatus:ws,SelectProductType:v.Z,SelectShop:p.Z,Coupon:Ta},data:function(){return{loading:!1,tableHeight:0,tableData:[{0:"测试测试"}],tableColumns:[{title:"券名称",key:"0"},{title:"售价",key:"3"},{title:"券类型",key:"4"},{title:"券状态",key:"5"}],searchData:{sid:"",goods_type_id:"",status:"",search:"",start_time:"",end_time:"",p:1,page:10,count:0},date:[],modal:{show:!1,title:"",type:!1,width:1e3,scrollable:!0,styles:{top:"50px"}}}},computed:{modalShow(){return t=>this.modal.type===t&&this.modal.show}},activated(){},created(){},mounted(){this.setHeight(),window.onresize=()=>{this.setHeight()}},methods:{setHeight(){this.tableHeight=window.innerHeight-264},clearDate(){this.searchData.start="",this.searchData.end=""},currentPage(t){this.searchData.p=t,this.getList()},pageSizeChange(t){this.searchData.page=t,this.search()},search(){this.searchData.p=1,this.getList()},showModal(t,s,a){console.log(a),this.modal.show=!0,this.modal.title=t,this.modal.type=s,this.modal.width=window.innerWidth-300},exportDataEvent(){setTimeout((()=>{const t=[];this.$refs.xTable.exportData({filename:"",type:"csv",isHeader:!0,isFooter:!0,data:t})}),100)}}},Pa=La,$a=(0,f.Z)(Pa,wa,ba,!1,null,"1832a8b6",null),za=$a.exports,Ra={name:"Index",components:{CouponList:za,DiscountCardList:ga,ValueCardList:ra,ProjectList:P,Supplier:Gt,Type:Yt,PackageList:W,GoodsList:Ds},data:function(){return{tab_index:"项目",tab_list:[{name:"项目",id:1},{name:"套餐次卡",id:2},{name:"商品",id:3},{name:"储值卡",id:4},{name:"折扣卡",id:5},{name:"优惠券",id:6},{name:"类别设置",id:7},{name:"品牌/供应商/商品单位设置",id:8}]}},computed:{current(){return(t,s)=>s===t.name&&this.tab_index===s}},methods:{handleTabClick(t){this.tab_index=t}}},Ha=Ra,Ia=(0,f.Z)(Ha,e,i,!1,null,"609fbdb8",null),Ga=Ia.exports}}]);
//# sourceMappingURL=300.16761e78.js.map